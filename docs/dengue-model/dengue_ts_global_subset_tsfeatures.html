<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Raphael Saldanha">

<title>Dengue AI - Time series features clustering</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../dengue-model/dengue_ts_global_subset_tsfeatures_sparse.html" rel="next">
<link href="../dengue-model/dengue_ts_global_subset.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZMP18L536K"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZMP18L536K', { 'anonymize_ip': true});
</script>

<script src="../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../site_libs/datatables-binding-0.28/datatables.js"></script>
<script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../site_libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../site_libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../site_libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="../site_libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="../site_libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="../site_libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="../site_libs/selectize-0.12.0/selectize.min.js"></script>
<link href="../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Dengue AI</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../dengue_data.html" rel="" target="" aria-current="page">
 <span class="menu-text">Data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../cluster_analysis.html" rel="" target="">
 <span class="menu-text">Cluster analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../dengue_model.html" rel="" target="">
 <span class="menu-text">Modeling</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../software.html" rel="" target="">
 <span class="menu-text">Software</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../publications.html" rel="" target="">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../export-data/exported_data.html" rel="" target="">
 <span class="menu-text">Exported data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../presentations.html" rel="" target="">
 <span class="menu-text">Presentations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../summary.html" rel="" target="">
 <span class="menu-text">Summary</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <a href="https://github.com/rfsaldanha/dengue" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../dengue_model.html">Modeling</a></li><li class="breadcrumb-item"><a href="../dengue-model/dengue_ts_overview.html">Dengue time series modelling</a></li><li class="breadcrumb-item"><a href="../dengue-model/dengue_ts_global_subset.html">Univariate models</a></li><li class="breadcrumb-item"><a href="../dengue-model/dengue_ts_global_subset_tsfeatures.html">Time series features clustering</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Dengue data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-data/raw_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Raw files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-data/case_classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Case classification analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-data/missing_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Missing data analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-data/imputation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Imputation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-data/aggregated_database.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Export aggregated database</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weather_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Weather data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../socioeconomic-data/socioeconomic_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Socio economic data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bundled_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bundled data</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Cluster analysis</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cluster_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Univariate</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Long time series</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_long.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Raw cases</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_long_cum.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Raw cases, cumulative</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_long_scaled.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Scaled cases</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_long_cum_scaled.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Scaled cases, cumulative</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/sdtw_long_cum_scaled.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SDTW, cumulative and scaled long time series</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_tsfeatures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time series features</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_long_scaled_hier.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hierarchical clustering</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Municipality/year time series</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_mun_year.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Yearly time series</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_mun_year_cumulative.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cumulative time series</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_mun_year_epi_year.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Epi year time series</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
 <span class="menu-text">Multivariate</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_multivariate_all.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cases and climate variables multivariate clustering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_multivariate_clim.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Climate variables multivariate clustering</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
 <span class="menu-text">Modeling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue_model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_weather_lag_class_v2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Denque and weather lags</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_classification_symptoms_conditions_multi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dengue case classification</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
 <span class="menu-text">Dengue time series modelling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_ts_overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Global and subset models workflow</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
 <span class="menu-text">Univariate models</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth3 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_ts_global_subset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SBD clustering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_ts_global_subset_tsfeatures.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Time series features clustering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_ts_global_subset_tsfeatures_sparse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time series features clustering, with robust sparse k-means</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false">
 <span class="menu-text">Multivariate models</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_mts_all.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multivariate clustering, all data model</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_mts_climate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multivariate clustering, climate model</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../publications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Publications</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../export-data/exported_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exported data</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="false">
 <span class="menu-text">Presentations</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/project_presentation.html" class="sidebar-item-text sidebar-link" target="&quot;_blank&quot;">
 <span class="menu-text">Project presentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/short_project_presentation.html" class="sidebar-item-text sidebar-link" target="&quot;_blank&quot;">
 <span class="menu-text">Project presentation, short version</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/trajectory_health_data_information.html" class="sidebar-item-text sidebar-link" target="&quot;_blank&quot;">
 <span class="menu-text">A trajectory on health data and information</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../publications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Publications</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#packages" id="toc-packages" class="nav-link active" data-scroll-target="#packages">Packages</a></li>
  <li><a href="#load-data" id="toc-load-data" class="nav-link" data-scroll-target="#load-data">Load data</a></li>
  <li><a href="#clustering" id="toc-clustering" class="nav-link" data-scroll-target="#clustering">Clustering</a>
  <ul class="collapse">
  <li><a href="#prepare-data" id="toc-prepare-data" class="nav-link" data-scroll-target="#prepare-data">Prepare data</a></li>
  <li><a href="#time-series-features" id="toc-time-series-features" class="nav-link" data-scroll-target="#time-series-features">Time series features</a></li>
  <li><a href="#k-means-clustering" id="toc-k-means-clustering" class="nav-link" data-scroll-target="#k-means-clustering">K-means clustering</a></li>
  <li><a href="#identify-municipalities-and-cluster-id" id="toc-identify-municipalities-and-cluster-id" class="nav-link" data-scroll-target="#identify-municipalities-and-cluster-id">Identify municipalities and cluster id</a></li>
  <li><a href="#cluster-sizes" id="toc-cluster-sizes" class="nav-link" data-scroll-target="#cluster-sizes">Cluster sizes</a></li>
  </ul></li>
  <li><a href="#train-and-test-split" id="toc-train-and-test-split" class="nav-link" data-scroll-target="#train-and-test-split">Train and test split</a></li>
  <li><a href="#recipes" id="toc-recipes" class="nav-link" data-scroll-target="#recipes">Recipes</a>
  <ul class="collapse">
  <li><a href="#global" id="toc-global" class="nav-link" data-scroll-target="#global">Global</a></li>
  <li><a href="#groups" id="toc-groups" class="nav-link" data-scroll-target="#groups">Groups</a></li>
  </ul></li>
  <li><a href="#regressors-specification" id="toc-regressors-specification" class="nav-link" data-scroll-target="#regressors-specification">Regressors specification</a>
  <ul class="collapse">
  <li><a href="#random-forest" id="toc-random-forest" class="nav-link" data-scroll-target="#random-forest">Random forest</a></li>
  <li><a href="#lightgbm" id="toc-lightgbm" class="nav-link" data-scroll-target="#lightgbm">LightGBM</a></li>
  </ul></li>
  <li><a href="#workflow-set" id="toc-workflow-set" class="nav-link" data-scroll-target="#workflow-set">Workflow set</a></li>
  <li><a href="#tune" id="toc-tune" class="nav-link" data-scroll-target="#tune">Tune</a></li>
  <li><a href="#fit" id="toc-fit" class="nav-link" data-scroll-target="#fit">Fit</a></li>
  <li><a href="#accuracy" id="toc-accuracy" class="nav-link" data-scroll-target="#accuracy">Accuracy</a>
  <ul class="collapse">
  <li><a href="#breakdown" id="toc-breakdown" class="nav-link" data-scroll-target="#breakdown">Breakdown</a></li>
  </ul></li>
  <li><a href="#session-info" id="toc-session-info" class="nav-link" data-scroll-target="#session-info">Session info</a></li>
  <li><a href="#links-of-intererest" id="toc-links-of-intererest" class="nav-link" data-scroll-target="#links-of-intererest">Links of intererest</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Time series features clustering</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Raphael Saldanha </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Last modification</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 1, 2023 | 09:07:18 +01:00</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>This notebooks aims to implement the global and subset modelling, adopting a clustering strategy based on time series features extraction, with the <code>{tsfeatures}</code> package.</p>
<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arrow)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bonsai)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(finetune)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(timetk)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tsfeatures)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tictoc)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geobr)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="load-data" class="level2">
<h2 class="anchored" data-anchor-id="load-data">Load data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>tdengue <span class="ot">&lt;-</span> <span class="fu">read_parquet</span>(<span class="at">file =</span> <span class="st">"../tdengue.parquet"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mun, date, <span class="fu">starts_with</span>(<span class="st">"cases"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>NA values are created when the lagged variables were calculated. The rows containing those NA values are dropped due machine learning regressors constraints.</p></li>
<li><p>For validation purposes, only the <code>cases</code> and <code>cases_lag*</code> covariates variables are keep.</p></li>
</ul>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(tdengue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 161,370
Columns: 9
$ mun        &lt;chr&gt; "110002", "110002", "110002", "110002", "110002", "110002",…
$ date       &lt;date&gt; 2011-02-06, 2011-02-13, 2011-02-20, 2011-02-27, 2011-03-06…
$ cases      &lt;dbl&gt; -0.51044592, 0.07880156, 0.66804904, 0.07880156, -0.5104459…
$ cases_lag1 &lt;dbl&gt; 2.43579149, -0.51044592, 0.07880156, 0.66804904, 0.07880156…
$ cases_lag2 &lt;dbl&gt; 0.66804904, 2.43579149, -0.51044592, 0.07880156, 0.66804904…
$ cases_lag3 &lt;dbl&gt; 0.07880156, 0.66804904, 2.43579149, -0.51044592, 0.07880156…
$ cases_lag4 &lt;dbl&gt; 0.66804904, 0.07880156, 0.66804904, 2.43579149, -0.51044592…
$ cases_lag5 &lt;dbl&gt; 0.66804904, 0.66804904, 0.07880156, 0.66804904, 2.43579149,…
$ cases_lag6 &lt;dbl&gt; -0.51044592, 0.66804904, 0.66804904, 0.07880156, 0.66804904…</code></pre>
</div>
</div>
</section>
<section id="clustering" class="level2">
<h2 class="anchored" data-anchor-id="clustering">Clustering</h2>
<p>This procedure goal is to cluster the municipalities considering time series features similarities.</p>
<section id="prepare-data" class="level3">
<h3 class="anchored" data-anchor-id="prepare-data">Prepare data</h3>
<p>Prepare the data for use with the <code>{tsfeatures}</code> package, converting the panel data to a list of <code>ts</code> objects.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>tdengue_df <span class="ot">&lt;-</span> tdengue <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mun, date) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>date) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> cases, <span class="at">.by =</span> mun)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>tdengue_list <span class="ot">&lt;-</span> <span class="fu">lapply</span>(tdengue_df<span class="sc">$</span>data, ts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="time-series-features" class="level3">
<h3 class="anchored" data-anchor-id="time-series-features">Time series features</h3>
<p>Extract time series features.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>tsf <span class="ot">&lt;-</span> <span class="fu">tsfeatures</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">tslist =</span> tdengue_list, </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">features =</span> <span class="fu">c</span>(<span class="st">"entropy"</span>, <span class="st">"stability"</span>, <span class="st">"lumpiness"</span>, <span class="st">"flat_spots"</span>, <span class="st">"stl_features"</span>, <span class="st">"acf_features"</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>tsf<span class="sc">$</span>mun <span class="ot">&lt;-</span> tdengue_df<span class="sc">$</span>mun</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="k-means-clustering" class="level3">
<h3 class="anchored" data-anchor-id="k-means-clustering">K-means clustering</h3>
<p>Cluster the municipalities based solely on the time series features.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>points <span class="ot">&lt;-</span> tsf <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>mun)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Uses <span class="math inline">\(k\)</span> from 2 to 10 for clustering.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>kclusts <span class="ot">&lt;-</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">k =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">kclust =</span> <span class="fu">map</span>(k, <span class="sc">~</span><span class="fu">kmeans</span>(points, .x)),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">tidied =</span> <span class="fu">map</span>(kclust, tidy),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">glanced =</span> <span class="fu">map</span>(kclust, glance),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">augmented =</span> <span class="fu">map</span>(kclust, augment, points)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Isolate results.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>clusters <span class="ot">&lt;-</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  kclusts <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(tidied))</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>assignments <span class="ot">&lt;-</span> </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  kclusts <span class="sc">%&gt;%</span> </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(augmented))</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>clusterings <span class="ot">&lt;-</span> </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  kclusts <span class="sc">%&gt;%</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(glanced))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The total sum of squares is plotted. The $k=5$ seems to be a break point.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(clusterings, <span class="fu">aes</span>(k, tot.withinss)) <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="dengue_ts_global_subset_tsfeatures_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="identify-municipalities-and-cluster-id" class="level3">
<h3 class="anchored" data-anchor-id="identify-municipalities-and-cluster-id">Identify municipalities and cluster id</h3>
<p>Finally, the cluster partition ID is added to the main dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>cluster_ids <span class="ot">&lt;-</span> clusterings <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(k <span class="sc">==</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(augmented) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">group =</span> .cluster) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mun =</span> tdengue_df<span class="sc">$</span>mun)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>tdengue <span class="ot">&lt;-</span> <span class="fu">left_join</span>(tdengue, cluster_ids, <span class="at">by =</span> <span class="st">"mun"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cluster-sizes" class="level3">
<h3 class="anchored" data-anchor-id="cluster-sizes">Cluster sizes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(cluster_ids<span class="sc">$</span>group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  1   2   3   4   5 
 43  90  66  12 115 </code></pre>
</div>
</div>
</section>
</section>
<section id="train-and-test-split" class="level2">
<h2 class="anchored" data-anchor-id="train-and-test-split">Train and test split</h2>
<p>Split the data into training and testing. The function <code>time_series_split</code> handles the time series, not shuffling them, and considering the panel data format, as depicted in the message about overlapping timestamps detected.</p>
<p>The last two years data will be used as the training set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>tdengue_split <span class="ot">&lt;-</span> tdengue <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">time_series_split</span>(</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_var =</span> date, </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">assess =</span> <span class="dv">52</span><span class="sc">*</span><span class="dv">2</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">cumulative =</span> <span class="cn">TRUE</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Data is not ordered by the 'date_var'. Resamples will be arranged by `date`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Overlapping Timestamps Detected. Processing overlapping time series together using sliding windows.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>tdengue_split</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;Analysis/Assess/Total&gt;
&lt;127466/33904/161370&gt;</code></pre>
</div>
</div>
<section id="k-folds" class="level4">
<h4 class="anchored" data-anchor-id="k-folds">K-folds</h4>
<p>The training set will be split into k folds.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>tdengue_split_folds <span class="ot">&lt;-</span> <span class="fu">training</span>(tdengue_split) <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">vfold_cv</span>(<span class="at">v =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="recipes" class="level2">
<h2 class="anchored" data-anchor-id="recipes">Recipes</h2>
<p>The global and subset models training specification are called recipes. The procedure bellow creates a list of those recipes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>recipes_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="global" class="level3">
<h3 class="anchored" data-anchor-id="global">Global</h3>
<p>The global training recipe uses data from all municipalities for training the models.</p>
<ul>
<li><p>The date and group variables are removed prior training</p></li>
<li><p>The municipality identification variable is treated as an Id variable, taking no place as a predictor in the training process</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>recipe_global <span class="ot">&lt;-</span> <span class="fu">recipe</span>(cases <span class="sc">~</span> ., <span class="at">data =</span> <span class="fu">training</span>(tdengue_split)) <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_rm</span>(date, group) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_role</span>(mun, <span class="at">new_role =</span> <span class="st">"id variable"</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>recipes_list <span class="ot">&lt;-</span> <span class="fu">append</span>(recipes_list, <span class="fu">list</span>(<span class="at">global =</span> recipe_global))</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(recipe_global)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="groups" class="level3">
<h3 class="anchored" data-anchor-id="groups">Groups</h3>
<ul>
<li><p>For each group created by the clustering process, a specific training recipe will be created. For this, the first step is to filter rows from the training set, keep only the rows belonging to the group in the loop</p></li>
<li><p>The date and group variables are removed prior training</p></li>
<li><p>The municipality identification variable is treated as an Id variable, taking no place as a predictor in the training process</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(g <span class="cf">in</span> <span class="fu">unique</span>(tdengue<span class="sc">$</span>group)){</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">recipe</span>(cases <span class="sc">~</span> ., <span class="at">data =</span> <span class="fu">training</span>(tdengue_split)) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">step_filter</span>(group <span class="sc">==</span> <span class="sc">!!</span>g) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">step_rm</span>(date, group) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">update_role</span>(mun, <span class="at">new_role =</span> <span class="st">"id variable"</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">list</span>(tmp)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">setNames</span>(tmp, <span class="fu">paste0</span>(<span class="st">"g"</span>, g))</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  recipes_list <span class="ot">&lt;-</span> <span class="fu">append</span>(recipes_list, tmp)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rm</span>(tmp)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="regressors-specification" class="level2">
<h2 class="anchored" data-anchor-id="regressors-specification">Regressors specification</h2>
<section id="random-forest" class="level3">
<h3 class="anchored" data-anchor-id="random-forest">Random forest</h3>
<p>A Random Forest specification using the <code>ranger</code> engine. The <code>trees</code> and <code>min_n</code> hyperparameters will be tuned.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>rf_spec <span class="ot">&lt;-</span> <span class="fu">rand_forest</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">trees =</span> <span class="fu">tune</span>(),</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_n =</span> <span class="fu">tune</span>()</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"ranger"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lightgbm" class="level3">
<h3 class="anchored" data-anchor-id="lightgbm">LightGBM</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># lgbm_spec &lt;- boost_tree(</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   trees = tune(),</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   min_n = tune(),</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   tree_depth = tune()</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ) %&gt;%</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   set_engine("lightgbm") %&gt;%</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   set_mode("regression")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="workflow-set" class="level2">
<h2 class="anchored" data-anchor-id="workflow-set">Workflow set</h2>
<p>This step creates a workflow set, combining the training recipes and regressors specifications.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>all_workflows <span class="ot">&lt;-</span> <span class="fu">workflow_set</span>(</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">preproc =</span> recipes_list, </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">models =</span> <span class="fu">list</span>(<span class="at">rf =</span> rf_spec), </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">cross =</span> <span class="cn">TRUE</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tune" class="level2">
<h2 class="anchored" data-anchor-id="tune">Tune</h2>
<p>This step tunes the training hyperparameters of each workflow.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>doParallel<span class="sc">::</span><span class="fu">registerDoParallel</span>()</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tic</span>()</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>race_results <span class="ot">&lt;-</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  all_workflows <span class="sc">%&gt;%</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow_map</span>(</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"tune_race_anova"</span>,</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">seed =</span> <span class="dv">345</span>,</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> tdengue_split_folds,</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid =</span> <span class="dv">10</span>,</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">control =</span> <span class="fu">control_race</span>(<span class="at">parallel_over =</span> <span class="st">"everything"</span>),</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">verbose =</span> <span class="cn">TRUE</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>i 1 of 6 tuning:     global_rf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 1 of 6 tuning:     global_rf (26m 31.4s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 2 of 6 tuning:     g3_rf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 2 of 6 tuning:     g3_rf (2m 56.8s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 3 of 6 tuning:     g2_rf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 3 of 6 tuning:     g2_rf (3m 57.8s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 4 of 6 tuning:     g4_rf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 4 of 6 tuning:     g4_rf (25.4s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 5 of 6 tuning:     g1_rf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 5 of 6 tuning:     g1_rf (1m 18.8s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 6 of 6 tuning:     g5_rf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 6 of 6 tuning:     g5_rf (5m 35.7s)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toc</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2446.936 sec elapsed</code></pre>
</div>
</div>
</section>
<section id="fit" class="level2">
<h2 class="anchored" data-anchor-id="fit">Fit</h2>
<p>Each workflow will be trained using the tuned hyperparameters, considering the RMSE metric as reference.</p>
<p>This procedure creates a list of trained models, containing the fit results and a list of the municipalities used on the training of each workflow.</p>
<p>The global workflow is trained with data from all municipalities and the subsets workflows are trained using the respective municipalities list given by the cluster algorithm.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tic</span>()</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>trained_models <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(w <span class="cf">in</span> <span class="fu">unique</span>(race_results<span class="sc">$</span>wflow_id)){</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  best_tune <span class="ot">&lt;-</span> race_results <span class="sc">%&gt;%</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">extract_workflow_set_result</span>(w) <span class="sc">%&gt;%</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  final_fit <span class="ot">&lt;-</span> race_results <span class="sc">%&gt;%</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">extract_workflow</span>(w) <span class="sc">%&gt;%</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">finalize_workflow</span>(best_tune) <span class="sc">%&gt;%</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(<span class="fu">training</span>(tdengue_split))</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>  mold <span class="ot">&lt;-</span> <span class="fu">extract_mold</span>(final_fit)</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>  train_ids <span class="ot">&lt;-</span> mold<span class="sc">$</span>extras<span class="sc">$</span>roles<span class="sc">$</span><span class="st">`</span><span class="at">id variable</span><span class="st">`</span> <span class="sc">%&gt;%</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>() <span class="sc">%&gt;%</span></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.character</span>()</span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>  final_fit <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>      <span class="st">"final_fit"</span> <span class="ot">=</span> final_fit, </span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>      <span class="st">"train_ids"</span> <span class="ot">=</span> train_ids</span>
<span id="cb42-23"><a href="#cb42-23" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb42-24"><a href="#cb42-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb42-25"><a href="#cb42-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-26"><a href="#cb42-26" aria-hidden="true" tabindex="-1"></a>  final_fit <span class="ot">&lt;-</span> <span class="fu">setNames</span>(final_fit, <span class="fu">paste0</span>(w))</span>
<span id="cb42-27"><a href="#cb42-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb42-28"><a href="#cb42-28" aria-hidden="true" tabindex="-1"></a>  trained_models <span class="ot">&lt;-</span> <span class="fu">append</span>(trained_models, final_fit)</span>
<span id="cb42-29"><a href="#cb42-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb42-30"><a href="#cb42-30" aria-hidden="true" tabindex="-1"></a><span class="fu">toc</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>325.285 sec elapsed</code></pre>
</div>
</div>
</section>
<section id="accuracy" class="level2">
<h2 class="anchored" data-anchor-id="accuracy">Accuracy</h2>
<p>After training each workflow, the accuracy of the models are obtained applying the fitted models on the testing set.</p>
<p>For the global model, all municipalities are using for testing. For the subsets models, only data from the subset’s municipalities are considered for testing.</p>
<p>The RMSE metric is obtained for each workflow and municipality.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>models_accuracy <span class="ot">&lt;-</span> <span class="fu">tibble</span>()</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(t <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(trained_models)){</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  model_tbl <span class="ot">&lt;-</span> <span class="fu">modeltime_table</span>(trained_models[[t]][[<span class="dv">1</span>]]) </span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  testing_set <span class="ot">&lt;-</span> <span class="fu">testing</span>(tdengue_split) <span class="sc">%&gt;%</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(mun <span class="sc">%in%</span> trained_models[[t]][[<span class="dv">2</span>]])</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  calib_tbl <span class="ot">&lt;-</span> model_tbl <span class="sc">%&gt;%</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">modeltime_calibrate</span>(</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">new_data =</span> testing_set, </span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">id       =</span> <span class="st">"mun"</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> calib_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">modeltime_accuracy</span>(</span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">acc_by_id =</span> <span class="cn">TRUE</span>, </span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">metric_set =</span> <span class="fu">metric_set</span>(rmse)</span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>  res<span class="sc">$</span>.model_id <span class="ot">&lt;-</span> <span class="fu">word</span>(<span class="fu">names</span>(trained_models[t]), <span class="dv">1</span>, <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>  models_accuracy <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(models_accuracy, res)</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This plot presents the RMSE distribution across the workflows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> models_accuracy, <span class="fu">aes</span>(<span class="at">x =</span> .model_id, <span class="at">y =</span> rmse, <span class="at">fill =</span> .model_desc)) <span class="sc">+</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="dengue_ts_global_subset_tsfeatures_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="breakdown" class="level3">
<h3 class="anchored" data-anchor-id="breakdown">Breakdown</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>mun_names <span class="ot">&lt;-</span> <span class="fu">lookup_muni</span>(<span class="at">code_muni =</span> <span class="st">"all"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">code_muni =</span> <span class="fu">substr</span>(code_muni, <span class="dv">0</span>, <span class="dv">6</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name_muni =</span> <span class="fu">paste0</span>(name_muni, <span class="st">", "</span>, abbrev_state)) <span class="sc">%&gt;%</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(code_muni, name_muni)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Using year 2010</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>models_accuracy <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mun_names, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"mun"</span> <span class="ot">=</span> <span class="st">"code_muni"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(.model_id, .model_desc, name_muni, rmse) <span class="sc">%&gt;%</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rmse =</span> <span class="fu">round</span>(rmse, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(.model_id, .model_desc, <span class="sc">-</span>rmse) <span class="sc">%&gt;%</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">filter =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-16f73e9300e10dd8ee35" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-16f73e9300e10dd8ee35">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.01\" data-max=\"1.78\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652"],["g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global"],["RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER"],["Montes Claros, MG","Umuarama, PR","Londrina, PR","Cascavel, PR","Corumbá, MS","Guaratinguetá, SP","Viamão, RS","Leme, SP","Jaú, SP","Chapecó, SC","Altamira, PA","Cametá, PA","Porto Seguro, BA","Ourinhos, SP","Paranaguá, PR","Patos, PB","Pouso Alegre, MG","Votorantim, SP","Conselheiro Lafaiete, MG","São João de Meriti, RJ","Jacareí, SP","Parintins, AM","Itaboraí, RJ","Rio de Janeiro, RJ","Angra dos Reis, RJ","Itajaí, SC","Barbacena, MG","Maricá, RJ","Itapevi, SP","Jandira, SP","Limeira, SP","São Vicente, SP","Resende, RJ","Itapecerica da Serra, SP","Itacoatiara, AM","Rio Claro, SP","São José dos Campos, SP","Taboão da Serra, SP","Itumbiara, GO","Barueri, SP","Praia Grande, SP","Sorocaba, SP","Mairiporã, SP","Fazenda Rio Grande, PR","Lauro de Freitas, BA","Balneário Camboriú, SC","Lagarto, SE","Boa Vista, RR","Camaçari, BA","Juazeiro do Norte, CE","Arapongas, PR","Apucarana, PR","Poá, SP","Vitória da Conquista, BA","Guarapari, ES","Tatuí, SP","Araçatuba, SP","Cambé, PR","Toledo, PR","Maringá, PR","Vilhena, RO","Santa Rita, PB","Carapicuíba, SP","São Carlos, SP","Alvorada, RS","Catanduva, SP","Mauá, SP","Araraquara, SP","Itapetininga, SP","Santa Cruz do Capibaribe, PE","Caraguatatuba, SP","Sinop, MT","Paragominas, PA","Barreiras, BA","Salvador, BA","Rondonópolis, MT","Bauru, SP","Juazeiro, BA","Assis, SP","Bragança Paulista, SP","Santa Bárbara d'Oeste, SP","Várzea Paulista, SP","Atibaia, SP","Pindamonhangaba, SP","Breves, PA","Jundiaí, SP","Botucatu, SP","São José de Ribamar, MA","Açailândia, MA","Valinhos, SP","Paulínia, SP","Embu, SP","Itanhaém, SP","Mogi Guaçu, SP","Ferraz de Vasconcelos, SP","Campinas, SP","Guarujá, SP","Macapá, AP","Belford Roxo, RJ","Teresópolis, RJ","Belém, PA","Ilhéus, BA","Taubaté, SP","Araruama, RJ","Petrópolis, RJ","Santana de Parnaíba, SP","Uruguaiana, RS","Ananindeua, PA","Guarulhos, SP","Sumaré, SP","Sobral, CE","Camaragibe, PE","Sabará, MG","Varginha, MG","Cotia, SP","Marília, SP","Lavras, MG","Uberaba, MG","Duque de Caxias, RJ","Itaperuna, RJ","Itu, SP","Osasco, SP","Vespasiano, MG","Barra Mansa, RJ","Macaé, RJ","Rio das Ostras, RJ","Nilópolis, RJ","Itapipoca, CE","São Gonçalo, RJ","Santos, SP","Itabuna, BA","Campos dos Goytacazes, RJ","Nova Friburgo, RJ","Brusque, SC","Sapucaia do Sul, RS","Novo Hamburgo, RS","Blumenau, SC","Ponta Grossa, PR","São José, SC","Pinhais, PR","Ariquemes, RO","São José dos Pinhais, PR","Almirante Tamandaré, PR","Criciúma, SC","Caxias do Sul, RS","Alagoinhas, BA","Rio Grande, RS","Jequié, BA","Linhares, ES","Iguatu, CE","Itatiba, SP","Bento Gonçalves, RS","Colombo, PR","Valparaíso de Goiás, GO","Codó, MA","São Gonçalo do Amarante, RN","Pelotas, RS","Novo Gama, GO","Poços de Caldas, MG","Tangará da Serra, MT","Paço do Lumiar, MA","Curitiba, PR","Paulista, PE","Araguaína, TO","São Félix do Xingu, PA","João Pessoa, PB","Formosa, GO","Vila Velha, ES","Ji-Paraná, RO","Maranguape, CE","Cabo de Santo Agostinho, PE","Ituiutaba, MG","Castanhal, PA","Palmas, TO","Arapiraca, AL","Anápolis, GO","Aparecida de Goiânia, GO","Porto Velho, RO","Bragança, PA","Timon, MA","Goiânia, GO","Jaboatão dos Guararapes, PE","Jataí, GO","Luziânia, GO","Tailândia, PA","Campina Grande, PB","Teresina, PI","Parnaíba, PI","Caruaru, PE","Trindade, GO","Imperatriz, MA","Governador Valadares, MG","Rio Verde, GO","Senador Canedo, GO","Caucaia, CE","Várzea Grande, MT","Parauapebas, PA","São Luís, MA","Cariacica, ES","Santa Maria, RS","Joinville, SC","Queimados, RJ","Teófilo Otoni, MG","Rio Branco, AC","Santarém, PA","Cubatão, SP","Cabo Frio, RJ","Mesquita, RJ","Niterói, RJ","Nova Iguaçu, RJ","Manaus, AM","Cachoeirinha, RS","Santa Cruz do Sul, RS","Jaraguá do Sul, SC","Palhoça, SC","Simões Filho, BA","Campo Largo, PR","São Leopoldo, RS","Bagé, RS","Erechim, RS","Passo Fundo, RS","Araucária, PR","Canoas, RS","Piraquara, PR","Lages, SC","Florianópolis, SC","Tubarão, SC","Parnamirim, RN","Ribeirão Pires, SP","Paulo Afonso, BA","Franca, SP","São Lourenço da Mata, PE","Porto Alegre, RS","Petrolina, PE","Igarassu, PE","Gravataí, RS","Águas Lindas de Goiás, GO","Nossa Senhora do Socorro, SE","Francisco Morato, SP","Três Lagoas, MS","Santo Antônio de Jesus, BA","Santa Luzia, MG","Araguari, MG","Suzano, SP","Patos de Minas, MG","Eunápolis, BA","Catalão, GO","São Mateus, ES","Foz do Iguaçu, PR","Feira de Santana, BA","Campo Grande, MS","Nova Serrana, MG","Crato, CE","Aracaju, SE","Brasília, DF","Itabira, MG","Juiz de Fora, MG","Dourados, MS","Aracruz, ES","Guarapuava, PR","Natal, RN","Serra, ES","Ibirité, MG","Barra do Piraí, RJ","Barretos, SP","Piracicaba, SP","Uberlândia, MG","Betim, MG","Birigui, SP","São José do Rio Preto, SP","Sertãozinho, SP","Presidente Prudente, SP","Muriaé, MG","Colatina, ES","Volta Redonda, RJ","Caxias, MA","São Pedro da Aldeia, RJ","Americana, SP","Passos, MG","Vitória, ES","Japeri, RJ","Itaituba, PA","Mossoró, RN","Contagem, MG","Garanhuns, PE","Cachoeiro de Itapemirim, ES","Barcarena, PA","Teixeira de Freitas, BA","Abaetetuba, PA","Magé, RJ","Araras, SP","Santo André, SP","Divinópolis, MG","Itaquaquecetuba, SP","Abreu e Lima, PE","Araxá, MG","Indaiatuba, SP","Mogi das Cruzes, SP","Belo Horizonte, MG","Itaguaí, RJ","Franco da Rocha, SP","Hortolândia, SP","Ribeirão Preto, SP","Caieiras, SP","São Caetano do Sul, SP","Olinda, PE","Maceió, AL","Ubá, MG","Salto, SP","Sete Lagoas, MG","Santana, AP","Diadema, SP","São Bernardo do Campo, SP","Marituba, PA","Marabá, PA","Ribeirão das Neves, MG","Cuiabá, MT","Fortaleza, CE","Recife, PE","Ipatinga, MG","São Paulo, SP","Tucuruí, PA","Bacabal, MA","Vitória de Santo Antão, PE","Coronel Fabriciano, MG","Maracanaú, CE","Fazenda Rio Grande, PR","Brusque, SC","Sapucaia do Sul, RS","Novo Hamburgo, RS","Cachoeirinha, RS","Santa Cruz do Sul, RS","Jaraguá do Sul, SC","Simões Filho, BA","Palhoça, SC","Campo Largo, PR","Blumenau, SC","São Leopoldo, RS","Bagé, RS","Erechim, RS","Araucária, PR","Passo Fundo, RS","Ponta Grossa, PR","São José, SC","Pinhais, PR","Ariquemes, RO","Canoas, RS","Piraquara, PR","São José dos Pinhais, PR","Florianópolis, SC","Almirante Tamandaré, PR","Criciúma, SC","Lages, SC","Alagoinhas, BA","Caxias do Sul, RS","Santa Maria, RS","Tubarão, SC","Parnamirim, RN","Balneário Camboriú, SC","Jequié, BA","Lauro de Freitas, BA","Lagarto, SE","Rio Grande, RS","Linhares, ES","Juazeiro do Norte, CE","Camaçari, BA","Boa Vista, RR","Montes Claros, MG","Itatiba, SP","Arapongas, PR","Paulo Afonso, BA","Ribeirão Pires, SP","Franca, SP","São Lourenço da Mata, PE","Londrina, PR","Umuarama, PR","Bento Gonçalves, RS","Apucarana, PR","Iguatu, CE","Petrolina, PE","Poá, SP","Colombo, PR","Porto Alegre, RS","Santo Antônio de Jesus, BA","São Gonçalo do Amarante, RN","Santa Luzia, MG","Gravataí, RS","Águas Lindas de Goiás, GO","Igarassu, PE","Suzano, SP","Francisco Morato, SP","Valparaíso de Goiás, GO","Eunápolis, BA","Vitória da Conquista, BA","Araguari, MG","Codó, MA","Nossa Senhora do Socorro, SE","Guarapari, ES","Tatuí, SP","Três Lagoas, MS","Novo Gama, GO","Pelotas, RS","Araçatuba, SP","Catalão, GO","Poços de Caldas, MG","Patos de Minas, MG","Cascavel, PR","São Mateus, ES","Nova Serrana, MG","Campo Grande, MS","Corumbá, MS","Paulista, PE","Feira de Santana, BA","Araguaína, TO","Paço do Lumiar, MA","Maringá, PR","Joinville, SC","Crato, CE","Curitiba, PR","Tangará da Serra, MT","Aracaju, SE","Toledo, PR","Itabira, MG","Cambé, PR","São Félix do Xingu, PA","Vila Velha, ES","Carapicuíba, SP","Dourados, MS","Brasília, DF","Vilhena, RO","Santa Rita, PB","Juiz de Fora, MG","São Carlos, SP","Foz do Iguaçu, PR","Alvorada, RS","João Pessoa, PB","Aracruz, ES","Guaratinguetá, SP","Mauá, SP","Ji-Paraná, RO","Natal, RN","Araraquara, SP","Guarapuava, PR","Viamão, RS","Formosa, GO","Maranguape, CE","Santa Cruz do Capibaribe, PE","Serra, ES","Barra do Piraí, RJ","Sinop, MT","Paragominas, PA","Cabo de Santo Agostinho, PE","Uberlândia, MG","Barretos, SP","Itapetininga, SP","Barreiras, BA","Ituiutaba, MG","Birigui, SP","Caraguatatuba, SP","Catanduva, SP","Rondonópolis, MT","Ibirité, MG","Salvador, BA","Leme, SP","Piracicaba, SP","Sertãozinho, SP","Porto Velho, RO","Castanhal, PA","Palmas, TO","Arapiraca, AL","Bragança, PA","Timon, MA","Juazeiro, BA","Betim, MG","Muriaé, MG","Bauru, SP","Presidente Prudente, SP","Várzea Paulista, SP","Aparecida de Goiânia, GO","Jaboatão dos Guararapes, PE","Colatina, ES","São José do Rio Preto, SP","Anápolis, GO","Tailândia, PA","Caxias, MA","Volta Redonda, RJ","Americana, SP","Bragança Paulista, SP","Santa Bárbara d'Oeste, SP","Goiânia, GO","Campina Grande, PB","Passos, MG","Japeri, RJ","São Pedro da Aldeia, RJ","Assis, SP","Jataí, GO","Luziânia, GO","Vitória, ES","Jaú, SP","Pindamonhangaba, SP","Contagem, MG","Atibaia, SP","Itaituba, PA","Teresina, PI","Mossoró, RN","Garanhuns, PE","Cachoeiro de Itapemirim, ES","Botucatu, SP","Jundiaí, SP","Chapecó, SC","Barcarena, PA","Breves, PA","Cametá, PA","Divinópolis, MG","Santo André, SP","Altamira, PA","São José de Ribamar, MA","Teixeira de Freitas, BA","Araras, SP","Itaquaquecetuba, SP","Paulínia, SP","Abaetetuba, PA","Açailândia, MA","Caruaru, PE","Magé, RJ","Queimados, RJ","Valinhos, SP","Parnaíba, PI","Araxá, MG","Governador Valadares, MG","Franco da Rocha, SP","Hortolândia, SP","Mogi das Cruzes, SP","Trindade, GO","Imperatriz, MA","Abreu e Lima, PE","Porto Seguro, BA","Itaguaí, RJ","Indaiatuba, SP","Ribeirão Preto, SP","Rio Verde, GO","Senador Canedo, GO","Caieiras, SP","Mogi Guaçu, SP","São Luís, MA","Caucaia, CE","Maceió, AL","Belo Horizonte, MG","Sete Lagoas, MG","Ubá, MG","Cariacica, ES","Ourinhos, SP","Salto, SP","São Caetano do Sul, SP","Patos, PB","Olinda, PE","Pouso Alegre, MG","Teófilo Otoni, MG","Embu, SP","Ferraz de Vasconcelos, SP","Votorantim, SP","Várzea Grande, MT","Parauapebas, PA","Macapá, AP","Conselheiro Lafaiete, MG","Teresópolis, RJ","Diadema, SP","Guarujá, SP","Santana, AP","Belford Roxo, RJ","Itanhaém, SP","Jacareí, SP","Paranaguá, PR","Parintins, AM","Belém, PA","Itaboraí, RJ","Petrópolis, RJ","Guarulhos, SP","Marituba, PA","Ilhéus, BA","Ribeirão das Neves, MG","Araruama, RJ","São João de Meriti, RJ","Campinas, SP","São Bernardo do Campo, SP","Taubaté, SP","Ananindeua, PA","Marabá, PA","Santana de Parnaíba, SP","Sumaré, SP","Uruguaiana, RS","Cuiabá, MT","Santarém, PA","Sobral, CE","Camaragibe, PE","Sabará, MG","São Paulo, SP","Itajaí, SC","Rio Branco, AC","Fortaleza, CE","Recife, PE","Ipatinga, MG","Varginha, MG","Maricá, RJ","Rio de Janeiro, RJ","Cotia, SP","Cubatão, SP","Marília, SP","Tucuruí, PA","Bacabal, MA","Vitória de Santo Antão, PE","Barbacena, MG","Lavras, MG","Angra dos Reis, RJ","Barra Mansa, RJ","Duque de Caxias, RJ","Itaperuna, RJ","Itapevi, SP","Itu, SP","Jandira, SP","Osasco, SP","Coronel Fabriciano, MG","Uberaba, MG","Vespasiano, MG","Cabo Frio, RJ","Macaé, RJ","Rio das Ostras, RJ","Itapecerica da Serra, SP","Limeira, SP","São Vicente, SP","Itacoatiara, AM","Maracanaú, CE","Nilópolis, RJ","Resende, RJ","Rio Claro, SP","Taboão da Serra, SP","Itumbiara, GO","Itapipoca, CE","São Gonçalo, RJ","Barueri, SP","Praia Grande, SP","Santos, SP","São José dos Campos, SP","Mesquita, RJ","Niterói, RJ","Nova Iguaçu, RJ","Sorocaba, SP","Manaus, AM","Itabuna, BA","Campos dos Goytacazes, RJ","Nova Friburgo, RJ","Mairiporã, SP"],[0.82,0.73,0.68,0.47,0.47,0.42,0.38,0.37,0.25,0.25,0.23,0.23,0.17,0.15,0.15,0.14,0.14,0.14,0.13,0.12,0.12,0.11,0.1,0.08,0.07000000000000001,0.07000000000000001,0.06,0.06,0.06,0.06,0.06,0.06,0.05,0.05,0.04,0.04,0.04,0.04,0.04,0.03,0.03,0.02,0.01,1.77,0.88,0.86,0.83,0.8,0.78,0.77,0.76,0.65,0.64,0.6,0.6,0.57,0.5,0.46,0.45,0.43,0.41,0.4,0.4,0.4,0.4,0.38,0.38,0.37,0.36,0.35,0.34,0.34,0.33,0.33,0.31,0.31,0.3,0.28,0.28,0.28,0.27,0.27,0.24,0.24,0.23,0.23,0.22,0.2,0.19,0.19,0.18,0.16,0.15,0.15,0.14,0.13,0.13,0.12,0.12,0.12,0.11,0.11,0.11,0.1,0.1,0.1,0.1,0.09,0.09,0.09,0.08,0.08,0.08,0.08,0.07000000000000001,0.07000000000000001,0.06,0.06,0.06,0.06,0.06,0.06,0.05,0.05,0.05,0.05,0.04,0.03,0.03,0.03,0.01,0.01,0.01,1.75,1.75,1.48,1.29,1.17,1.14,1.13,1.12,1.11,1.08,1.08,1.08,0.99,0.83,0.79,0.77,0.71,0.71,0.66,0.64,0.6,0.57,0.5600000000000001,0.55,0.55,0.51,0.48,0.46,0.45,0.44,0.43,0.4,0.38,0.38,0.37,0.36,0.34,0.33,0.32,0.31,0.31,0.3,0.3,0.3,0.29,0.29,0.29,0.28,0.27,0.27,0.27,0.26,0.25,0.21,0.19,0.19,0.18,0.17,0.17,0.17,0.16,0.15,0.14,0.13,0.13,0.13,0.9,0.46,0.2,0.15,0.11,0.08,0.08,0.05,0.02,0.02,0.02,0.01,1.48,1.45,1.42,1.35,1.34,1.33,1.28,1.27,1.23,1.18,1.14,1.13,1.09,1.07,1.03,0.9399999999999999,0.89,0.74,0.73,0.73,0.7,0.66,0.64,0.61,0.61,0.6,0.59,0.59,0.59,0.58,0.58,0.57,0.57,0.55,0.54,0.53,0.49,0.49,0.48,0.46,0.44,0.43,0.42,0.41,0.39,0.38,0.38,0.37,0.36,0.35,0.35,0.34,0.34,0.34,0.34,0.32,0.3,0.3,0.3,0.3,0.29,0.28,0.28,0.28,0.27,0.27,0.27,0.26,0.26,0.26,0.23,0.23,0.23,0.22,0.22,0.21,0.21,0.2,0.2,0.2,0.2,0.19,0.19,0.18,0.18,0.18,0.18,0.17,0.17,0.17,0.17,0.17,0.16,0.16,0.15,0.15,0.15,0.15,0.14,0.12,0.12,0.11,0.1,0.09,0.09,0.09,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.06,0.06,0.06,0.05,0.04,1.78,1.78,1.73,1.49,1.48,1.44,1.39,1.32,1.32,1.31,1.28,1.28,1.27,1.24,1.17,1.17,1.16,1.15,1.14,1.13,1.12,1.11,1.1,1.09,1.08,1.07,1.07,1.06,1.06,1.05,0.9399999999999999,0.89,0.86,0.85,0.85,0.84,0.84,0.8,0.79,0.79,0.77,0.75,0.75,0.75,0.73,0.72,0.71,0.7,0.7,0.67,0.67,0.66,0.64,0.63,0.63,0.63,0.63,0.62,0.61,0.61,0.61,0.61,0.6,0.6,0.59,0.59,0.58,0.58,0.58,0.5600000000000001,0.5600000000000001,0.55,0.55,0.55,0.55,0.54,0.53,0.53,0.51,0.5,0.49,0.48,0.47,0.47,0.47,0.46,0.46,0.45,0.45,0.45,0.45,0.44,0.44,0.44,0.43,0.43,0.41,0.41,0.4,0.4,0.4,0.4,0.39,0.38,0.38,0.38,0.38,0.38,0.38,0.37,0.37,0.37,0.37,0.36,0.36,0.36,0.36,0.36,0.36,0.35,0.35,0.35,0.35,0.35,0.34,0.34,0.34,0.34,0.34,0.33,0.33,0.33,0.33,0.33,0.33,0.32,0.31,0.31,0.31,0.31,0.3,0.3,0.3,0.3,0.29,0.29,0.29,0.29,0.29,0.29,0.29,0.29,0.29,0.28,0.28,0.28,0.28,0.27,0.27,0.27,0.27,0.27,0.27,0.27,0.26,0.26,0.26,0.26,0.26,0.26,0.26,0.25,0.25,0.25,0.24,0.24,0.22,0.22,0.22,0.22,0.22,0.22,0.22,0.22,0.21,0.21,0.21,0.21,0.21,0.2,0.2,0.2,0.2,0.2,0.2,0.19,0.19,0.19,0.19,0.19,0.19,0.18,0.18,0.18,0.18,0.18,0.18,0.18,0.17,0.17,0.17,0.17,0.17,0.17,0.17,0.17,0.16,0.16,0.15,0.15,0.15,0.15,0.15,0.15,0.15,0.15,0.15,0.15,0.14,0.14,0.14,0.14,0.14,0.14,0.14,0.14,0.13,0.13,0.13,0.13,0.13,0.13,0.12,0.12,0.12,0.12,0.12,0.11,0.11,0.11,0.11,0.11,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.09,0.09,0.09,0.09,0.09,0.09,0.08,0.08,0.08,0.08,0.08,0.08,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.03,0.03,0.03,0.03,0.03,0.03,0.02,0.02,0.02,0.02,0.01,0.01,0.01,0.01,0.01]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>.model_id<\/th>\n      <th>.model_desc<\/th>\n      <th>name_muni<\/th>\n      <th>rmse<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":4},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>models_accuracy <span class="sc">%&gt;%</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mun_names, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"mun"</span> <span class="ot">=</span> <span class="st">"code_muni"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(.model_id, .model_desc, name_muni, rmse) <span class="sc">%&gt;%</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rmse =</span> <span class="fu">round</span>(rmse, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(.model_desc) <span class="sc">%&gt;%</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">.model_id =</span> <span class="fu">case_when</span>(</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    .model_id <span class="sc">!=</span> <span class="st">"global"</span> <span class="sc">~</span> <span class="st">"cluster"</span>,</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.default =</span> .model_id</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> .model_id, <span class="at">values_from =</span> rmse) <span class="sc">%&gt;%</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dif =</span> <span class="fu">round</span>(global <span class="sc">-</span> cluster, <span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">filter =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-709a6aeebfbf13acf811" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-709a6aeebfbf13acf811">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.01\" data-max=\"1.78\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0.01\" data-max=\"1.77\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"-0.11\" data-max=\"0.15\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326"],["RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER"],["Ariquemes, RO","Ji-Paraná, RO","Porto Velho, RO","Vilhena, RO","Rio Branco, AC","Itacoatiara, AM","Manaus, AM","Parintins, AM","Boa Vista, RR","Abaetetuba, PA","Altamira, PA","Ananindeua, PA","Barcarena, PA","Belém, PA","Bragança, PA","Breves, PA","Cametá, PA","Castanhal, PA","Itaituba, PA","Marabá, PA","Marituba, PA","Paragominas, PA","Parauapebas, PA","Santarém, PA","São Félix do Xingu, PA","Tailândia, PA","Tucuruí, PA","Macapá, AP","Santana, AP","Araguaína, TO","Palmas, TO","Açailândia, MA","Bacabal, MA","Caxias, MA","Codó, MA","Imperatriz, MA","Paço do Lumiar, MA","São José de Ribamar, MA","São Luís, MA","Timon, MA","Parnaíba, PI","Teresina, PI","Caucaia, CE","Crato, CE","Fortaleza, CE","Iguatu, CE","Itapipoca, CE","Juazeiro do Norte, CE","Maracanaú, CE","Maranguape, CE","Sobral, CE","Parnamirim, RN","Mossoró, RN","Natal, RN","São Gonçalo do Amarante, RN","Campina Grande, PB","João Pessoa, PB","Patos, PB","Santa Rita, PB","Abreu e Lima, PE","Cabo de Santo Agostinho, PE","Camaragibe, PE","Caruaru, PE","Garanhuns, PE","Igarassu, PE","Jaboatão dos Guararapes, PE","Olinda, PE","Paulista, PE","Petrolina, PE","Recife, PE","Santa Cruz do Capibaribe, PE","São Lourenço da Mata, PE","Vitória de Santo Antão, PE","Arapiraca, AL","Maceió, AL","Aracaju, SE","Lagarto, SE","Nossa Senhora do Socorro, SE","Alagoinhas, BA","Barreiras, BA","Camaçari, BA","Eunápolis, BA","Feira de Santana, BA","Ilhéus, BA","Itabuna, BA","Jequié, BA","Juazeiro, BA","Lauro de Freitas, BA","Paulo Afonso, BA","Porto Seguro, BA","Salvador, BA","Santo Antônio de Jesus, BA","Simões Filho, BA","Teixeira de Freitas, BA","Vitória da Conquista, BA","Araguari, MG","Araxá, MG","Barbacena, MG","Belo Horizonte, MG","Betim, MG","Conselheiro Lafaiete, MG","Contagem, MG","Coronel Fabriciano, MG","Divinópolis, MG","Governador Valadares, MG","Ibirité, MG","Ipatinga, MG","Itabira, MG","Ituiutaba, MG","Juiz de Fora, MG","Lavras, MG","Montes Claros, MG","Muriaé, MG","Nova Serrana, MG","Passos, MG","Patos de Minas, MG","Poços de Caldas, MG","Pouso Alegre, MG","Ribeirão das Neves, MG","Sabará, MG","Santa Luzia, MG","Sete Lagoas, MG","Teófilo Otoni, MG","Ubá, MG","Uberaba, MG","Uberlândia, MG","Varginha, MG","Vespasiano, MG","Aracruz, ES","Cachoeiro de Itapemirim, ES","Cariacica, ES","Colatina, ES","Guarapari, ES","Linhares, ES","São Mateus, ES","Serra, ES","Vila Velha, ES","Vitória, ES","Angra dos Reis, RJ","Araruama, RJ","Barra do Piraí, RJ","Barra Mansa, RJ","Belford Roxo, RJ","Cabo Frio, RJ","Campos dos Goytacazes, RJ","Duque de Caxias, RJ","Itaboraí, RJ","Itaguaí, RJ","Itaperuna, RJ","Japeri, RJ","Macaé, RJ","Magé, RJ","Maricá, RJ","Mesquita, RJ","Nilópolis, RJ","Niterói, RJ","Nova Friburgo, RJ","Nova Iguaçu, RJ","Petrópolis, RJ","Queimados, RJ","Resende, RJ","Rio das Ostras, RJ","Rio de Janeiro, RJ","São Gonçalo, RJ","São João de Meriti, RJ","São Pedro da Aldeia, RJ","Teresópolis, RJ","Volta Redonda, RJ","Americana, SP","Araçatuba, SP","Araraquara, SP","Araras, SP","Assis, SP","Atibaia, SP","Barretos, SP","Barueri, SP","Bauru, SP","Birigui, SP","Botucatu, SP","Bragança Paulista, SP","Caieiras, SP","Campinas, SP","Caraguatatuba, SP","Carapicuíba, SP","Catanduva, SP","Cotia, SP","Cubatão, SP","Diadema, SP","Embu, SP","Ferraz de Vasconcelos, SP","Franca, SP","Francisco Morato, SP","Franco da Rocha, SP","Guaratinguetá, SP","Guarujá, SP","Guarulhos, SP","Hortolândia, SP","Indaiatuba, SP","Itanhaém, SP","Itapecerica da Serra, SP","Itapetininga, SP","Itapevi, SP","Itaquaquecetuba, SP","Itatiba, SP","Itu, SP","Jacareí, SP","Jandira, SP","Jaú, SP","Jundiaí, SP","Leme, SP","Limeira, SP","Mairiporã, SP","Marília, SP","Mauá, SP","Mogi das Cruzes, SP","Mogi Guaçu, SP","Osasco, SP","Ourinhos, SP","Paulínia, SP","Pindamonhangaba, SP","Piracicaba, SP","Poá, SP","Praia Grande, SP","Presidente Prudente, SP","Ribeirão Pires, SP","Ribeirão Preto, SP","Rio Claro, SP","Salto, SP","Santa Bárbara d'Oeste, SP","Santana de Parnaíba, SP","Santo André, SP","Santos, SP","São Bernardo do Campo, SP","São Caetano do Sul, SP","São Carlos, SP","São José do Rio Preto, SP","São José dos Campos, SP","São Paulo, SP","São Vicente, SP","Sertãozinho, SP","Sorocaba, SP","Sumaré, SP","Suzano, SP","Taboão da Serra, SP","Tatuí, SP","Taubaté, SP","Valinhos, SP","Várzea Paulista, SP","Votorantim, SP","Almirante Tamandaré, PR","Apucarana, PR","Arapongas, PR","Araucária, PR","Cambé, PR","Campo Largo, PR","Cascavel, PR","Colombo, PR","Curitiba, PR","Fazenda Rio Grande, PR","Foz do Iguaçu, PR","Guarapuava, PR","Londrina, PR","Maringá, PR","Paranaguá, PR","Pinhais, PR","Piraquara, PR","Ponta Grossa, PR","São José dos Pinhais, PR","Toledo, PR","Umuarama, PR","Balneário Camboriú, SC","Blumenau, SC","Brusque, SC","Chapecó, SC","Criciúma, SC","Florianópolis, SC","Itajaí, SC","Jaraguá do Sul, SC","Joinville, SC","Lages, SC","Palhoça, SC","São José, SC","Tubarão, SC","Alvorada, RS","Bagé, RS","Bento Gonçalves, RS","Cachoeirinha, RS","Canoas, RS","Caxias do Sul, RS","Erechim, RS","Gravataí, RS","Novo Hamburgo, RS","Passo Fundo, RS","Pelotas, RS","Porto Alegre, RS","Rio Grande, RS","Santa Cruz do Sul, RS","Santa Maria, RS","São Leopoldo, RS","Sapucaia do Sul, RS","Uruguaiana, RS","Viamão, RS","Campo Grande, MS","Corumbá, MS","Dourados, MS","Três Lagoas, MS","Cuiabá, MT","Rondonópolis, MT","Sinop, MT","Tangará da Serra, MT","Várzea Grande, MT","Águas Lindas de Goiás, GO","Anápolis, GO","Aparecida de Goiânia, GO","Catalão, GO","Formosa, GO","Goiânia, GO","Itumbiara, GO","Jataí, GO","Luziânia, GO","Novo Gama, GO","Rio Verde, GO","Senador Canedo, GO","Trindade, GO","Valparaíso de Goiás, GO","Brasília, DF"],[1.13,0.36,0.3,0.38,0.07000000000000001,0.04,0.01,0.11,0.77,0.19,0.2,0.09,0.21,0.11,0.29,0.21,0.21,0.3,0.22,0.09,0.1,0.34,0.13,0.08,0.4,0.27,0.06,0.13,0.12,0.45,0.3,0.19,0.06,0.27,0.5600000000000001,0.17,0.45,0.2,0.15,0.29,0.18,0.22,0.15,0.44,0.07000000000000001,0.64,0.03,0.79,0.04,0.35,0.08,0.89,0.22,0.36,0.61,0.26,0.37,0.14,0.38,0.17,0.34,0.08,0.19,0.22,0.6,0.28,0.14,0.46,0.63,0.07000000000000001,0.35,0.7,0.06,0.3,0.15,0.43,0.84,0.5600000000000001,1.06,0.33,0.79,0.58,0.46,0.1,0.01,0.85,0.29,0.85,0.73,0.17,0.31,0.62,1.32,0.2,0.58,0.58,0.18,0.06,0.15,0.29,0.13,0.24,0.05,0.21,0.18,0.32,0.07000000000000001,0.41,0.33,0.38,0.06,0.75,0.29,0.47,0.26,0.5,0.51,0.14,0.1,0.08,0.61,0.15,0.14,0.15,0.05,0.34,0.07000000000000001,0.05,0.37,0.22,0.15,0.28,0.55,0.8,0.48,0.35,0.4,0.25,0.06,0.1,0.35,0.06,0.12,0.05,0.01,0.06,0.11,0.17,0.06,0.26,0.05,0.19,0.07000000000000001,0.02,0.04,0.02,0.01,0.02,0.11,0.19,0.04,0.05,0.07000000000000001,0.03,0.1,0.26,0.13,0.27,0.27,0.53,0.36,0.2,0.26,0.24,0.34,0.03,0.29,0.33,0.22,0.27,0.16,0.1,0.33,0.4,0.33,0.07000000000000001,0.07000000000000001,0.13,0.14,0.14,0.71,0.59,0.18,0.37,0.13,0.11,0.18,0.17,0.12,0.05,0.34,0.06,0.2,0.75,0.06,0.12,0.06,0.25,0.22,0.31,0.05,0.01,0.07000000000000001,0.37,0.18,0.16,0.06,0.15,0.2,0.25,0.31,0.63,0.03,0.29,0.72,0.17,0.04,0.15,0.27,0.09,0.21,0.03,0.1,0.15,0.38,0.28,0.03,0.08,0.05,0.31,0.02,0.09,0.6,0.04,0.55,0.1,0.19,0.29,0.14,1.08,0.66,0.75,1.17,0.41,1.31,0.49,0.63,0.44,1.78,0.38,0.36,0.7,0.45,0.12,1.14,1.11,1.16,1.1,0.43,0.67,0.86,1.28,1.78,0.22,1.07,1.09,0.08,1.39,0.45,1.07,1.32,1.15,0.9399999999999999,0.38,1.27,0.67,1.48,1.12,1.06,1.24,0.61,1.49,1.17,0.54,0.63,0.84,1.44,1.05,1.28,1.73,0.09,0.36,0.47,0.47,0.4,0.55,0.09,0.33,0.35,0.44,0.14,0.61,0.28,0.29,0.53,0.36,0.27,0.04,0.26,0.26,0.55,0.17,0.17,0.18,0.59,0.39],[1.12,0.36,0.29,0.41,0.11,0.04,0.01,0.11,0.8,0.2,0.23,0.09,0.21,0.11,0.29,0.23,0.23,0.31,0.23,0.09,0.1,0.33,0.13,0.08,0.4,0.26,0.06,0.12,0.12,0.43,0.31,0.19,0.06,0.27,0.57,0.17,0.46,0.2,0.13,0.29,0.19,0.21,0.15,0.43,0.07000000000000001,0.71,0.03,0.77,0.04,0.34,0.08,0.89,0.23,0.35,0.5600000000000001,0.25,0.38,0.14,0.4,0.18,0.33,0.08,0.19,0.22,0.61,0.27,0.15,0.44,0.64,0.07000000000000001,0.35,0.7,0.06,0.3,0.15,0.42,0.83,0.59,0.99,0.33,0.78,0.54,0.48,0.11,0.01,0.79,0.28,0.88,0.73,0.17,0.31,0.58,1.34,0.21,0.6,0.57,0.18,0.06,0.17,0.3,0.13,0.23,0.05,0.19,0.17,0.34,0.07000000000000001,0.39,0.32,0.38,0.06,0.82,0.28,0.44,0.26,0.55,0.51,0.14,0.09,0.08,0.58,0.14,0.15,0.15,0.06,0.32,0.08,0.05,0.37,0.22,0.13,0.28,0.6,0.77,0.49,0.35,0.37,0.26,0.07000000000000001,0.1,0.34,0.05,0.12,0.05,0.01,0.06,0.1,0.17,0.06,0.26,0.05,0.2,0.06,0.02,0.04,0.02,0.01,0.02,0.1,0.2,0.05,0.05,0.08,0.03,0.12,0.27,0.12,0.28,0.27,0.5,0.37,0.2,0.28,0.24,0.34,0.03,0.3,0.3,0.22,0.28,0.16,0.13,0.34,0.4,0.38,0.07000000000000001,0.08,0.12,0.16,0.14,0.73,0.59,0.17,0.42,0.13,0.09,0.17,0.18,0.15,0.05,0.36,0.06,0.19,0.71,0.06,0.12,0.06,0.25,0.23,0.37,0.06,0.01,0.07000000000000001,0.38,0.18,0.15,0.06,0.15,0.18,0.24,0.34,0.64,0.03,0.29,0.74,0.17,0.04,0.15,0.27,0.1,0.2,0.03,0.11,0.16,0.4,0.3,0.04,0.07000000000000001,0.06,0.3,0.02,0.09,0.57,0.04,0.57,0.11,0.19,0.27,0.14,1.08,0.65,0.76,1.14,0.46,1.33,0.47,0.64,0.45,1.77,0.49,0.36,0.68,0.43,0.15,1.13,1.09,1.17,1.11,0.45,0.73,0.86,1.29,1.75,0.25,1.08,1.03,0.07000000000000001,1.42,0.46,1.07,1.35,1.14,0.9399999999999999,0.4,1.27,0.66,1.48,1.13,1.08,1.23,0.61,1.48,1.18,0.55,0.66,0.83,1.45,0.9,1.28,1.75,0.1,0.38,0.46,0.47,0.38,0.59,0.09,0.31,0.34,0.48,0.14,0.6,0.3,0.3,0.53,0.38,0.28,0.04,0.27,0.27,0.55,0.17,0.16,0.18,0.6,0.41],[0.01,0,0.01,-0.03,-0.04,0,0,0,-0.03,-0.01,-0.03,0,0,0,0,-0.02,-0.02,-0.01,-0.01,0,0,0.01,0,0,0,0.01,0,0.01,0,0.02,-0.01,0,0,0,-0.01,0,-0.01,0,0.02,0,-0.01,0.01,0,0.01,0,-0.07000000000000001,0,0.02,0,0.01,0,0,-0.01,0.01,0.05,0.01,-0.01,0,-0.02,-0.01,0.01,0,0,0,-0.01,0.01,-0.01,0.02,-0.01,0,0,0,0,0,0,0.01,0.01,-0.03,0.07000000000000001,0,0.01,0.04,-0.02,-0.01,0,0.06,0.01,-0.03,0,0,0,0.04,-0.02,-0.01,-0.02,0.01,0,0,-0.02,-0.01,0,0.01,0,0.02,0.01,-0.02,0,0.02,0.01,0,0,-0.07000000000000001,0.01,0.03,0,-0.05,0,0,0.01,0,0.03,0.01,-0.01,0,-0.01,0.02,-0.01,0,0,0,0.02,0,-0.05,0.03,-0.01,0,0.03,-0.01,-0.01,0,0.01,0.01,0,0,0,0,0.01,0,0,0,0,-0.01,0.01,0,0,0,0,0,0.01,-0.01,-0.01,0,-0.01,0,-0.02,-0.01,0.01,-0.01,0,0.03,-0.01,0,-0.02,0,0,0,-0.01,0.03,0,-0.01,0,-0.03,-0.01,0,-0.05,0,-0.01,0.01,-0.02,0,-0.02,0,0.01,-0.05,0,0.02,0.01,-0.01,-0.03,0,-0.02,0,0.01,0.04,0,0,0,0,-0.01,-0.06,-0.01,0,0,-0.01,0,0.01,0,0,0.02,0.01,-0.03,-0.01,0,0,-0.02,0,0,0,0,-0.01,0.01,0,-0.01,-0.01,-0.02,-0.02,-0.01,0.01,-0.01,0.01,0,0,0.03,0,-0.02,-0.01,0,0.02,0,0,0.01,-0.01,0.03,-0.05,-0.02,0.02,-0.01,-0.01,0.01,-0.11,0,0.02,0.02,-0.03,0.01,0.02,-0.01,-0.01,-0.02,-0.06,0,-0.01,0.03,-0.03,-0.01,0.06,0.01,-0.03,-0.01,0,-0.03,0.01,0,-0.02,0,0.01,0,-0.01,-0.02,0.01,0,0.01,-0.01,-0.01,-0.03,0.01,-0.01,0.15,0,-0.02,-0.01,-0.02,0.01,0,0.02,-0.04,0,0.02,0.01,-0.04,0,0.01,-0.02,-0.01,0,-0.02,-0.01,0,-0.01,-0.01,0,0,0.01,0,-0.01,-0.02]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>.model_desc<\/th>\n      <th>name_muni<\/th>\n      <th>global<\/th>\n      <th>cluster<\/th>\n      <th>dif<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>models_accuracy <span class="sc">%&gt;%</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mun_names, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"mun"</span> <span class="ot">=</span> <span class="st">"code_muni"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(.model_id, .model_desc, name_muni, rmse) <span class="sc">%&gt;%</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(.model_desc) <span class="sc">%&gt;%</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">.model_id =</span> <span class="fu">case_when</span>(</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    .model_id <span class="sc">!=</span> <span class="st">"global"</span> <span class="sc">~</span> <span class="st">"cluster"</span>,</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.default =</span> .model_id</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> .model_id, <span class="at">values_from =</span> rmse) <span class="sc">%&gt;%</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dif =</span> <span class="fu">round</span>(global <span class="sc">-</span> cluster, <span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(.model_desc, dif) <span class="sc">%&gt;%</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> global, <span class="at">y =</span> cluster, <span class="at">fill =</span> .model_desc, <span class="at">color =</span> dif)) <span class="sc">+</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>  viridis<span class="sc">::</span><span class="fu">scale_color_viridis</span>(<span class="at">option =</span> <span class="st">"inferno"</span>) <span class="sc">+</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Global model"</span>, <span class="at">y =</span> <span class="st">"Subset models"</span>, <span class="at">title =</span> <span class="st">"RMSE error obtained with global and subset training strategies"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="dengue_ts_global_subset_tsfeatures_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="session-info" class="level2">
<h2 class="anchored" data-anchor-id="session-info">Session info</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.1.2 (2021-11-01)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 22.04.2 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.10.0
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.10.0

locale:
 [1] LC_CTYPE=pt_BR.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] rlang_1.1.1        ranger_0.15.1      DT_0.28            geobr_1.7.0       
 [5] tictoc_1.2         kableExtra_1.3.4   tsfeatures_1.1     timetk_2.8.3      
 [9] modeltime_1.2.7    finetune_1.1.0     bonsai_0.2.1       yardstick_1.2.0   
[13] workflowsets_1.0.1 workflows_1.1.3    tune_1.1.1         rsample_1.1.1     
[17] recipes_1.0.6      parsnip_1.1.0      modeldata_1.1.0    infer_1.0.4       
[21] dials_1.2.0        scales_1.2.1       broom_1.0.5        tidymodels_1.1.0  
[25] arrow_12.0.1       lubridate_1.9.2    forcats_1.0.0      stringr_1.5.0     
[29] dplyr_1.1.2        purrr_1.0.1        readr_2.1.4        tidyr_1.3.0       
[33] tibble_3.2.1       ggplot2_3.4.2      tidyverse_2.0.0   

loaded via a namespace (and not attached):
  [1] backports_1.4.1     systemfonts_1.0.4   splines_4.1.2      
  [4] crosstalk_1.2.0     listenv_0.9.0       digest_0.6.33      
  [7] foreach_1.5.2       htmltools_0.5.5     viridis_0.6.3      
 [10] fansi_1.0.4         magrittr_2.0.3      doParallel_1.0.17  
 [13] tzdb_0.4.0          globals_0.16.2      gower_1.0.1        
 [16] RcppParallel_5.1.7  xts_0.13.1          svglite_2.1.1      
 [19] hardhat_1.3.0       timechange_0.2.0    prettyunits_1.1.1  
 [22] forecast_8.21       tseries_0.10-54     colorspace_2.1-0   
 [25] rvest_1.0.3         xfun_0.39           jsonlite_1.8.7     
 [28] lme4_1.1-34         survival_3.2-13     zoo_1.8-12         
 [31] iterators_1.0.14    glue_1.6.2          gtable_0.3.3       
 [34] ipred_0.9-14        webshot_0.5.5       future.apply_1.11.0
 [37] quantmod_0.4.24     DBI_1.1.3           Rcpp_1.0.11        
 [40] viridisLite_0.4.2   units_0.8-2         GPfit_1.0-8        
 [43] bit_4.0.5           proxy_0.4-27        lava_1.7.2.1       
 [46] StanHeaders_2.26.27 prodlim_2023.03.31  htmlwidgets_1.6.2  
 [49] httr_1.4.6          ellipsis_0.3.2      pkgconfig_2.0.3    
 [52] farver_2.1.1        sass_0.4.7          nnet_7.3-17        
 [55] utf8_1.2.3          tidyselect_1.2.0    labeling_0.4.2     
 [58] DiceDesign_1.9      cachem_1.0.8        munsell_0.5.0      
 [61] tools_4.1.2         cli_3.6.1           generics_0.1.3     
 [64] evaluate_0.21       fastmap_1.1.1       yaml_2.3.7         
 [67] knitr_1.43          bit64_4.0.5         future_1.33.0      
 [70] nlme_3.1-155        xml2_1.3.5          compiler_4.1.2     
 [73] rstudioapi_0.15.0   curl_5.0.1          e1071_1.7-13       
 [76] lhs_1.1.6           bslib_0.5.0         stringi_1.7.12     
 [79] lattice_0.20-45     Matrix_1.6-0        nloptr_2.0.3       
 [82] classInt_0.4-9      urca_1.3-3          vctrs_0.6.3        
 [85] pillar_1.9.0        lifecycle_1.0.3     furrr_0.3.1        
 [88] jquerylib_0.1.4     lmtest_0.9-40       data.table_1.14.8  
 [91] R6_2.5.1            gridExtra_2.3       KernSmooth_2.23-20 
 [94] parallelly_1.36.0   codetools_0.2-18    boot_1.3-28        
 [97] MASS_7.3-55         assertthat_0.2.1    withr_2.5.0        
[100] fracdiff_1.5-2      parallel_4.1.2      hms_1.1.3          
[103] quadprog_1.5-8      grid_4.1.2          rpart_4.1.16       
[106] timeDate_4022.108   minqa_1.2.5         class_7.3-20       
[109] rmarkdown_2.23      TTR_0.24.3          sf_1.0-14          </code></pre>
</div>
</div>
</section>
<section id="links-of-intererest" class="level2">
<h2 class="anchored" data-anchor-id="links-of-intererest">Links of intererest</h2>
<ul>
<li><p><a href="https://cran.r-project.org/web/packages/tsfeatures/vignettes/tsfeatures.html" class="uri">https://cran.r-project.org/web/packages/tsfeatures/vignettes/tsfeatures.html</a></p></li>
<li><p><a href="https://www.tidymodels.org/learn/statistics/k-means/" class="uri">https://www.tidymodels.org/learn/statistics/k-means/</a></p></li>
<li><p><a href="https://business-science.github.io/modeltime/articles/modeling-panel-data.html" class="uri">https://business-science.github.io/modeltime/articles/modeling-panel-data.html</a></p></li>
<li><p><a href="https://blog.bguarisma.com/series/time-series-forecasting" class="uri">https://blog.bguarisma.com/series/time-series-forecasting</a></p></li>
</ul>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../dengue-model/dengue_ts_global_subset.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">SBD clustering</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../dengue-model/dengue_ts_global_subset_tsfeatures_sparse.html" class="pagination-link">
        <span class="nav-page-text">Time series features clustering, with robust sparse k-means</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Website made with <a href="https://quarto.org/">Quarto</a>, by Raphael Saldanha.</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Inria | LNCC | PCDaS</div>
  </div>
</footer>



</body></html>