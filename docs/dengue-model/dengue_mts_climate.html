<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.163">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Raphael Saldanha">

<title>Dengue AI - Multivariate clustering, climate model</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../software.html" rel="next">
<link href="../dengue-model/dengue_mts_all.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZMP18L536K"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZMP18L536K', { 'anonymize_ip': true});
</script>
<script src="../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../site_libs/datatables-binding-0.28/datatables.js"></script>
<script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../site_libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../site_libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../site_libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="../site_libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="../site_libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="../site_libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="../site_libs/selectize-0.12.0/selectize.min.js"></script>
<link href="../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Dengue AI</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../dengue_data.html" rel="" target="" aria-current="page">
 <span class="menu-text">Data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../cluster_analysis.html" rel="" target="">
 <span class="menu-text">Cluster analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../dengue_model.html" rel="" target="">
 <span class="menu-text">Modeling</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../software.html" rel="" target="">
 <span class="menu-text">Software</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../publications.html" rel="" target="">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../export-data/exported_data.html" rel="" target="">
 <span class="menu-text">Exported data</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../presentations.html" rel="" target="">
 <span class="menu-text">Presentations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../summary.html" rel="" target="">
 <span class="menu-text">Summary</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
    <a href="https://github.com/rfsaldanha/dengue" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../dengue_model.html">Modeling</a></li><li class="breadcrumb-item"><a href="../dengue-model/dengue_ts_overview.html">Dengue time series modelling</a></li><li class="breadcrumb-item"><a href="../dengue-model/dengue_mts_all.html">Multivariate models</a></li><li class="breadcrumb-item"><a href="../dengue-model/dengue_mts_climate.html">Multivariate clustering, climate model</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Dengue data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-data/raw_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Raw files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-data/case_classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Case classification analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-data/missing_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Missing data analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-data/imputation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Imputation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-data/aggregated_database.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Export aggregated database</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../weather_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Weather data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../socioeconomic-data/socioeconomic_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Socio economic data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bundled_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bundled data</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Cluster analysis</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cluster_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Univariate</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Long time series</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_long.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Raw cases</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_long_cum.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Raw cases, cumulative</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_long_scaled.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Scaled cases</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_long_cum_scaled.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Scaled cases, cumulative</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/sdtw_long_cum_scaled.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SDTW, cumulative and scaled long time series</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_tsfeatures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time series features</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_long_scaled_hier.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hierarchical clustering</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Municipality/year time series</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_mun_year.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Yearly time series</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_mun_year_cumulative.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cumulative time series</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_mun_year_epi_year.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Epi year time series</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
 <span class="menu-text">Multivariate</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_multivariate_all.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cases and climate variables multivariate clustering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-cluster/cluster_multivariate_clim.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Climate variables multivariate clustering</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
 <span class="menu-text">Modeling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue_model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">
 <span class="menu-text">Denque and weather lags</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_weather_lag_class.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Classification task</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_weather_lag_reg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regression task</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_classification_symptoms_conditions_multi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dengue case classification</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
 <span class="menu-text">Dengue time series modelling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_ts_overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Global and subset models workflow</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false">
 <span class="menu-text">Univariate models</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_ts_global_subset.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SBD clustering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_ts_global_subset_tsfeatures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time series features clustering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_ts_global_subset_tsfeatures_sparse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Time series features clustering, with robust sparse k-means</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true">
 <span class="menu-text">Multivariate models</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth3 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_mts_all.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multivariate clustering, all data model</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dengue-model/dengue_mts_climate.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Multivariate clustering, climate model</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../software.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Software</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../publications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Publications</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../export-data/exported_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exported data</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="false">
 <span class="menu-text">Presentations</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/project_presentation.html" class="sidebar-item-text sidebar-link" target="&quot;_blank&quot;">
 <span class="menu-text">Project presentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/short_project_presentation.html" class="sidebar-item-text sidebar-link" target="&quot;_blank&quot;">
 <span class="menu-text">Project presentation, short version</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/trajectory_health_data_information.html" class="sidebar-item-text sidebar-link" target="&quot;_blank&quot;">
 <span class="menu-text">A trajectory on health data and information</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../publications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Publications</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#packages" id="toc-packages" class="nav-link active" data-scroll-target="#packages">Packages</a></li>
  <li><a href="#load-data" id="toc-load-data" class="nav-link" data-scroll-target="#load-data">Load data</a></li>
  <li><a href="#clustering" id="toc-clustering" class="nav-link" data-scroll-target="#clustering">Clustering</a></li>
  <li><a href="#train-and-test-split" id="toc-train-and-test-split" class="nav-link" data-scroll-target="#train-and-test-split">Train and test split</a></li>
  <li><a href="#recipes" id="toc-recipes" class="nav-link" data-scroll-target="#recipes">Recipes</a>
  <ul class="collapse">
  <li><a href="#global" id="toc-global" class="nav-link" data-scroll-target="#global">Global</a></li>
  <li><a href="#groups" id="toc-groups" class="nav-link" data-scroll-target="#groups">Groups</a></li>
  </ul></li>
  <li><a href="#regressors-specification" id="toc-regressors-specification" class="nav-link" data-scroll-target="#regressors-specification">Regressors specification</a>
  <ul class="collapse">
  <li><a href="#random-forest" id="toc-random-forest" class="nav-link" data-scroll-target="#random-forest">Random forest</a></li>
  <li><a href="#workflow-set" id="toc-workflow-set" class="nav-link" data-scroll-target="#workflow-set">Workflow set</a></li>
  </ul></li>
  <li><a href="#tune" id="toc-tune" class="nav-link" data-scroll-target="#tune">Tune</a></li>
  <li><a href="#fit" id="toc-fit" class="nav-link" data-scroll-target="#fit">Fit</a></li>
  <li><a href="#accuracy" id="toc-accuracy" class="nav-link" data-scroll-target="#accuracy">Accuracy</a>
  <ul class="collapse">
  <li><a href="#breakdown" id="toc-breakdown" class="nav-link" data-scroll-target="#breakdown">Breakdown</a></li>
  </ul></li>
  <li><a href="#session-info" id="toc-session-info" class="nav-link" data-scroll-target="#session-info">Session info</a></li>
  <li><a href="#useful-links" id="toc-useful-links" class="nav-link" data-scroll-target="#useful-links">Useful links</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Multivariate clustering, climate model</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Raphael Saldanha </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Last modification</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 29, 2023 | 11:16:54 +01:00</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>This notebooks aims to reproduce the methodology of the paper submitted to the SBD2023 conference, implementing the global and subset modelling with a multivariate approach.</p>
<p>This methodology aims to compare the performance of models trained with data from all municipalities time-series (<em>global models</em>) and models trained with subset of municipalities time-series (<em>subset models</em>).</p>
<p>Those subsets were created by a clustering algorithm considering the climate time-series.</p>
<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arrow)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bonsai)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(finetune)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(timetk)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dtwclust)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tictoc)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geobr)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"../functions.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="load-data" class="level2">
<h2 class="anchored" data-anchor-id="load-data">Load data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>tdengue <span class="ot">&lt;-</span> <span class="fu">read_parquet</span>(<span class="at">file =</span> <span class="fu">data_dir</span>(<span class="st">"bundled_data/tdengue.parquet"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(mun, date, <span class="fu">starts_with</span>(<span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"tmax"</span>, <span class="st">"tmin"</span>, <span class="st">"prec"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>NA values are created when the lagged variables were calculated. The rows containing those NA values are dropped due machine learning regressors constraints.</p></li>
<li><p>Cases, maximum temperature, minimum temperature, precipitation variables are loaded, and also their time-lagged variables (from 1 to 6 weeks).</p></li>
</ul>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(tdengue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 329,982
Columns: 33
$ mun           &lt;chr&gt; "110002", "110002", "110002", "110002", "110002", "11000…
$ date          &lt;date&gt; 2011-01-16, 2011-01-23, 2011-01-23, 2011-01-30, 2011-01…
$ cases         &lt;dbl&gt; 0.07830184, 0.66762618, 0.66762618, 2.43559920, 2.435599…
$ cases_raw     &lt;dbl&gt; 1, 2, 2, 5, 5, 0, 0, 1, 1, 2, 2, 1, 1, 0, 0, 2, 2, 1, 1,…
$ cases_cum_raw &lt;dbl&gt; 10, 12, 14, 19, 24, 24, 24, 25, 26, 28, 30, 31, 32, 32, …
$ cases_cum     &lt;dbl&gt; -1.419910, -1.410558, -1.401206, -1.377827, -1.354447, -…
$ cases_lag1    &lt;dbl&gt; 0.07830184, 0.07830184, 0.66762618, 0.66762618, 2.435599…
$ cases_lag2    &lt;dbl&gt; 0.66762618, 0.07830184, 0.07830184, 0.66762618, 0.667626…
$ cases_lag3    &lt;dbl&gt; 0.66762618, 0.66762618, 0.07830184, 0.07830184, 0.667626…
$ cases_lag4    &lt;dbl&gt; 0.66762618, 0.66762618, 0.66762618, 0.07830184, 0.078301…
$ cases_lag5    &lt;dbl&gt; 0.66762618, 0.66762618, 0.66762618, 0.66762618, 0.078301…
$ cases_lag6    &lt;dbl&gt; -0.51102251, 0.66762618, 0.66762618, 0.66762618, 0.66762…
$ tmax          &lt;dbl&gt; 0.52569297, 0.75229054, 0.75229054, 0.83110709, 0.831107…
$ tmax_lag1     &lt;dbl&gt; 0.52569297, 0.52569297, 0.75229054, 0.75229054, 0.831107…
$ tmax_lag2     &lt;dbl&gt; 0.39269005, 0.52569297, 0.52569297, 0.75229054, 0.752290…
$ tmax_lag3     &lt;dbl&gt; 0.39269005, 0.39269005, 0.52569297, 0.52569297, 0.752290…
$ tmax_lag4     &lt;dbl&gt; 0.29909540, 0.39269005, 0.39269005, 0.52569297, 0.525692…
$ tmax_lag5     &lt;dbl&gt; 0.29909540, 0.29909540, 0.39269005, 0.39269005, 0.525692…
$ tmax_lag6     &lt;dbl&gt; -14.51841512, 0.29909540, 0.29909540, 0.39269005, 0.3926…
$ tmin          &lt;dbl&gt; 1.0212567, 0.9886102, 0.9886102, 1.0072654, 1.0072654, 1…
$ tmin_lag1     &lt;dbl&gt; 1.0212567, 1.0212567, 0.9886102, 0.9886102, 1.0072654, 1…
$ tmin_lag2     &lt;dbl&gt; 1.0585670, 1.0212567, 1.0212567, 0.9886102, 0.9886102, 1…
$ tmin_lag3     &lt;dbl&gt; 1.0585670, 1.0585670, 1.0212567, 1.0212567, 0.9886102, 0…
$ tmin_lag4     &lt;dbl&gt; 0.9932740, 1.0585670, 1.0585670, 1.0212567, 1.0212567, 0…
$ tmin_lag5     &lt;dbl&gt; 0.9932740, 0.9932740, 1.0585670, 1.0585670, 1.0212567, 1…
$ tmin_lag6     &lt;dbl&gt; -8.6560935, 0.9932740, 0.9932740, 1.0585670, 1.0585670, …
$ prec          &lt;dbl&gt; 1.5673247, 1.1822375, 1.1822375, 0.9472381, 0.9472381, 1…
$ prec_lag1     &lt;dbl&gt; 1.5673247, 1.5673247, 1.1822375, 1.1822375, 0.9472381, 0…
$ prec_lag2     &lt;dbl&gt; 1.6101183, 1.5673247, 1.5673247, 1.1822375, 1.1822375, 0…
$ prec_lag3     &lt;dbl&gt; 1.6101183, 1.6101183, 1.5673247, 1.5673247, 1.1822375, 1…
$ prec_lag4     &lt;dbl&gt; 1.5969131, 1.6101183, 1.6101183, 1.5673247, 1.5673247, 1…
$ prec_lag5     &lt;dbl&gt; 1.5969131, 1.5969131, 1.6101183, 1.6101183, 1.5673247, 1…
$ prec_lag6     &lt;dbl&gt; -1.9551115, 1.5969131, 1.5969131, 1.6101183, 1.6101183, …</code></pre>
</div>
</div>
</section>
<section id="clustering" class="level2">
<h2 class="anchored" data-anchor-id="clustering">Clustering</h2>
<p>Here we load the results from this <a href="../dengue-cluster/cluster_multivariate_clim.html">clustering notebook</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>clust_res <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"../dengue-cluster/m_clim_cluster_ids.rds"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">mun =</span> code_muni, group)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(clust_res<span class="sc">$</span>group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  1   2   3   4   5 
127  97  25  41  43 </code></pre>
</div>
</div>
<p>Join clustering results with bundled dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>tdengue <span class="ot">&lt;-</span> <span class="fu">left_join</span>(tdengue, clust_res, <span class="at">by =</span> <span class="st">"mun"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(group, <span class="at">.after =</span> mun)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Check for NAs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">is.na</span>(tdengue<span class="sc">$</span>group))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 FALSE 
329982 </code></pre>
</div>
</div>
</section>
<section id="train-and-test-split" class="level2">
<h2 class="anchored" data-anchor-id="train-and-test-split">Train and test split</h2>
<p>Split the data into training and testing. The function <code>time_series_split</code> handles the time series, not shuffling them, and considering the panel data format, as depicted in the message about overlapping timestamps detected.</p>
<p>The last two years data will be used as the training set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>tdengue_split <span class="ot">&lt;-</span> tdengue <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">time_series_split</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_var =</span> date, </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">assess =</span> <span class="dv">52</span><span class="sc">*</span><span class="dv">2</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">cumulative =</span> <span class="cn">TRUE</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Data is not ordered by the 'date_var'. Resamples will be arranged by `date`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Overlapping Timestamps Detected. Processing overlapping time series together using sliding windows.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>tdengue_split</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;Analysis/Assess/Total&gt;
&lt;261123/68859/329982&gt;</code></pre>
</div>
</div>
<section id="k-folds" class="level4">
<h4 class="anchored" data-anchor-id="k-folds">K-folds</h4>
<p>The training set will be split into k folds.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>tdengue_split_folds <span class="ot">&lt;-</span> <span class="fu">training</span>(tdengue_split) <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">vfold_cv</span>(<span class="at">v =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="recipes" class="level2">
<h2 class="anchored" data-anchor-id="recipes">Recipes</h2>
<p>The global and subset models training specification are called recipes. The procedure bellow creates a list of those recipes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>recipes_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="global" class="level3">
<h3 class="anchored" data-anchor-id="global">Global</h3>
<p>The global training recipe uses data from all municipalities for training the models.</p>
<ul>
<li><p>The date and group variables are removed prior training</p></li>
<li><p>The municipality identification variable is treated as an Id variable, taking no place as a predictor in the training process</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>recipe_global <span class="ot">&lt;-</span> <span class="fu">recipe</span>(cases <span class="sc">~</span> ., <span class="at">data =</span> <span class="fu">training</span>(tdengue_split)) <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_rm</span>(date, group) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_role</span>(mun, <span class="at">new_role =</span> <span class="st">"id variable"</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>recipes_list <span class="ot">&lt;-</span> <span class="fu">append</span>(recipes_list, <span class="fu">list</span>(<span class="at">global =</span> recipe_global))</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(recipe_global)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="groups" class="level3">
<h3 class="anchored" data-anchor-id="groups">Groups</h3>
<ul>
<li><p>For each group created by the clustering process, a specific training recipe will be created. For this, the first step is to filter rows from the training set, keeping only the rows belonging to the group in the loop</p></li>
<li><p>The date and group variables are removed prior to training</p></li>
<li><p>The municipality identification variable is treated as an Id variable, taking no place as a predictor in the training process</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(g <span class="cf">in</span> <span class="fu">unique</span>(tdengue<span class="sc">$</span>group)){</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">recipe</span>(cases <span class="sc">~</span> ., <span class="at">data =</span> <span class="fu">training</span>(tdengue_split)) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">step_filter</span>(group <span class="sc">==</span> <span class="sc">!!</span>g) <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">step_rm</span>(date, group) <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">update_role</span>(mun, <span class="at">new_role =</span> <span class="st">"id variable"</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">list</span>(tmp)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">setNames</span>(tmp, <span class="fu">paste0</span>(<span class="st">"g"</span>, g))</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  recipes_list <span class="ot">&lt;-</span> <span class="fu">append</span>(recipes_list, tmp)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rm</span>(tmp)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="regressors-specification" class="level2">
<h2 class="anchored" data-anchor-id="regressors-specification">Regressors specification</h2>
<section id="random-forest" class="level3">
<h3 class="anchored" data-anchor-id="random-forest">Random forest</h3>
<p>A Random Forest specification using the <code>ranger</code> engine. The <code>trees</code> and <code>min_n</code> hyperparameters will be tuned.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>rf_spec <span class="ot">&lt;-</span> <span class="fu">rand_forest</span>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">trees =</span> <span class="fu">tune</span>(),</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_n =</span> <span class="fu">tune</span>()</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"ranger"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="workflow-set" class="level3">
<h3 class="anchored" data-anchor-id="workflow-set">Workflow set</h3>
<p>This step creates a workflow set, combining the training recipes and regressors specifications.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>all_workflows <span class="ot">&lt;-</span> <span class="fu">workflow_set</span>(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">preproc =</span> recipes_list, </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">models =</span> <span class="fu">list</span>(<span class="at">rf =</span> rf_spec), </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">cross =</span> <span class="cn">TRUE</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="tune" class="level2">
<h2 class="anchored" data-anchor-id="tune">Tune</h2>
<p>This step tunes the training hyperparameters of each workflow.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>doParallel<span class="sc">::</span><span class="fu">registerDoParallel</span>()</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tic</span>()</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>race_results <span class="ot">&lt;-</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  all_workflows <span class="sc">%&gt;%</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow_map</span>(</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"tune_race_anova"</span>,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">seed =</span> <span class="dv">345</span>,</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> tdengue_split_folds,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid =</span> <span class="dv">10</span>,</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">control =</span> <span class="fu">control_race</span>(<span class="at">parallel_over =</span> <span class="st">"everything"</span>),</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">verbose =</span> <span class="cn">TRUE</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>i 1 of 6 tuning:     global_rf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 1 of 6 tuning:     global_rf (2h 12m 49.1s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 2 of 6 tuning:     g1_rf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 2 of 6 tuning:     g1_rf (31m 25.2s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 3 of 6 tuning:     g2_rf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 3 of 6 tuning:     g2_rf (31m 8.5s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 4 of 6 tuning:     g3_rf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 4 of 6 tuning:     g3_rf (3m 45.8s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 5 of 6 tuning:     g4_rf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 5 of 6 tuning:     g4_rf (8m 5.6s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 6 of 6 tuning:     g5_rf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 6 of 6 tuning:     g5_rf (8m 13.9s)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toc</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>12931.669 sec elapsed</code></pre>
</div>
</div>
</section>
<section id="fit" class="level2">
<h2 class="anchored" data-anchor-id="fit">Fit</h2>
<p>Each workflow will be trained using the tuned hyperparameters, considering the RMSE metric as reference.</p>
<p>This procedure creates a list of trained models, containing the fit results and a list of the municipalities used on the training of each workflow.</p>
<p>The global workflow is trained with data from all municipalities and the subsets workflows are trained using the respective municipalities list given by the cluster algorithm.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tic</span>()</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>trained_models <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(w <span class="cf">in</span> <span class="fu">unique</span>(race_results<span class="sc">$</span>wflow_id)){</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  best_tune <span class="ot">&lt;-</span> race_results <span class="sc">%&gt;%</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">extract_workflow_set_result</span>(w) <span class="sc">%&gt;%</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select_best</span>(<span class="st">"rmse"</span>)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  final_fit <span class="ot">&lt;-</span> race_results <span class="sc">%&gt;%</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">extract_workflow</span>(w) <span class="sc">%&gt;%</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">finalize_workflow</span>(best_tune) <span class="sc">%&gt;%</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fit</span>(<span class="fu">training</span>(tdengue_split))</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>  mold <span class="ot">&lt;-</span> <span class="fu">extract_mold</span>(final_fit)</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>  train_ids <span class="ot">&lt;-</span> mold<span class="sc">$</span>extras<span class="sc">$</span>roles<span class="sc">$</span><span class="st">`</span><span class="at">id variable</span><span class="st">`</span> <span class="sc">%&gt;%</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.character</span>()</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>  final_fit <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>      <span class="st">"final_fit"</span> <span class="ot">=</span> final_fit, </span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>      <span class="st">"train_ids"</span> <span class="ot">=</span> train_ids</span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>  final_fit <span class="ot">&lt;-</span> <span class="fu">setNames</span>(final_fit, <span class="fu">paste0</span>(w))</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>  trained_models <span class="ot">&lt;-</span> <span class="fu">append</span>(trained_models, final_fit)</span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a><span class="fu">toc</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>5065.569 sec elapsed</code></pre>
</div>
</div>
</section>
<section id="accuracy" class="level2">
<h2 class="anchored" data-anchor-id="accuracy">Accuracy</h2>
<p>After training each workflow, the accuracy of the models are obtained applying the fitted models on the testing set.</p>
<p>For the global model, all municipalities are using for testing. For the subsets models, only data from the subset’s municipalities are considered for testing.</p>
<p>The RMSE metric is obtained for each workflow and municipality.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>models_accuracy <span class="ot">&lt;-</span> <span class="fu">tibble</span>()</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(t <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(trained_models)){</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  model_tbl <span class="ot">&lt;-</span> <span class="fu">modeltime_table</span>(trained_models[[t]][[<span class="dv">1</span>]]) </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  testing_set <span class="ot">&lt;-</span> <span class="fu">testing</span>(tdengue_split) <span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(mun <span class="sc">%in%</span> trained_models[[t]][[<span class="dv">2</span>]])</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  calib_tbl <span class="ot">&lt;-</span> model_tbl <span class="sc">%&gt;%</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">modeltime_calibrate</span>(</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">new_data =</span> testing_set, </span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">id       =</span> <span class="st">"mun"</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> calib_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">modeltime_accuracy</span>(</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">acc_by_id =</span> <span class="cn">TRUE</span>, </span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">metric_set =</span> <span class="fu">metric_set</span>(rmse, mape)</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>  res<span class="sc">$</span>.model_id <span class="ot">&lt;-</span> <span class="fu">word</span>(<span class="fu">names</span>(trained_models[t]), <span class="dv">1</span>, <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>  models_accuracy <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(models_accuracy, res)</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ We have detected a possible intermittent series, you can change the default metric set to the extended_forecast_accuracy_metric_set() containing the MAAPE metric, which is more appropriate for this type of series.
ℹ We have detected a possible intermittent series, you can change the default metric set to the extended_forecast_accuracy_metric_set() containing the MAAPE metric, which is more appropriate for this type of series.</code></pre>
</div>
</div>
<p>This plot presents the RMSE distribution across the workflows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> models_accuracy, <span class="fu">aes</span>(<span class="at">x =</span> .model_id, <span class="at">y =</span> rmse, <span class="at">fill =</span> .model_desc)) <span class="sc">+</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="dengue_mts_climate_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="breakdown" class="level3">
<h3 class="anchored" data-anchor-id="breakdown">Breakdown</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>mun_names <span class="ot">&lt;-</span> <span class="fu">lookup_muni</span>(<span class="at">code_muni =</span> <span class="st">"all"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">code_muni =</span> <span class="fu">substr</span>(code_muni, <span class="dv">0</span>, <span class="dv">6</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name_muni =</span> <span class="fu">paste0</span>(name_muni, <span class="st">", "</span>, abbrev_state)) <span class="sc">%&gt;%</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(code_muni, name_muni)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Using year 2010</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>models_accuracy <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mun_names, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"mun"</span> <span class="ot">=</span> <span class="st">"code_muni"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(.model_id, .model_desc, name_muni, rmse) <span class="sc">%&gt;%</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rmse =</span> <span class="fu">round</span>(rmse, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(.model_id, .model_desc, <span class="sc">-</span>rmse) <span class="sc">%&gt;%</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">filter =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-dabcdcfde33aa43cf544" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-dabcdcfde33aa43cf544">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"1.36\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666"],["g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g1","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g2","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g3","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g4","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","g5","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global","global"],["RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER"],["Simões Filho, BA","Ariquemes, RO","Camaçari, BA","Ponta Grossa, PR","Petrolina, PE","Montes Claros, MG","Lagarto, SE","São José dos Pinhais, PR","São José, SC","Juazeiro do Norte, CE","Parnamirim, RN","Paulo Afonso, BA","Lauro de Freitas, BA","Santo Antônio de Jesus, BA","Porto Alegre, RS","Jequié, BA","São Lourenço da Mata, PE","Francisco Morato, SP","Itatiba, SP","Franca, SP","Três Lagoas, MS","Valparaíso de Goiás, GO","São Gonçalo do Amarante, RN","Araçatuba, SP","Maringá, PR","Toledo, PR","Corumbá, MS","Eunápolis, BA","Nova Serrana, MG","São Carlos, SP","Tangará da Serra, MT","Paulista, PE","Anápolis, GO","Vilhena, RO","Presidente Prudente, SP","Santa Bárbara d'Oeste, SP","Curitiba, PR","Contagem, MG","Dourados, MS","Paço do Lumiar, MA","Santa Rita, PB","Cabo de Santo Agostinho, PE","Itabira, MG","Bauru, SP","Catanduva, SP","Piracicaba, SP","Formosa, GO","Betim, MG","Sertãozinho, SP","Muriaé, MG","Arapiraca, AL","Rondonópolis, MT","Ituiutaba, MG","Passos, MG","Barretos, SP","Porto Velho, RO","Paragominas, PA","Juazeiro, BA","Volta Redonda, RJ","Jundiaí, SP","Campina Grande, PB","São Pedro da Aldeia, RJ","Americana, SP","Assis, SP","Jataí, GO","Jaboatão dos Guararapes, PE","Garanhuns, PE","Atibaia, SP","Pindamonhangaba, SP","Maceió, AL","Ji-Paraná, RO","Japeri, RJ","Várzea Grande, MT","Timon, MA","Araxá, MG","Ubá, MG","Itaquaquecetuba, SP","Mogi Guaçu, SP","Santo André, SP","Olinda, PE","Porto Seguro, BA","Magé, RJ","Hortolândia, SP","Tailândia, PA","Açailândia, MA","Parnaíba, PI","Itabaiana, SE","Ourinhos, SP","Barcarena, PA","Abreu e Lima, PE","Ilhéus, BA","Ribeirão das Neves, MG","Teófilo Otoni, MG","Embu, SP","Guarujá, SP","Jacareí, SP","Limeira, SP","Belford Roxo, RJ","Itaboraí, RJ","Guarulhos, SP","Marília, SP","São Bernardo do Campo, SP","Araruama, RJ","Cubatão, SP","Sorocaba, SP","Sobral, CE","Camaragibe, PE","Lavras, MG","Sabará, MG","Angra dos Reis, RJ","Cabo Frio, RJ","Itaperuna, RJ","Maricá, RJ","Osasco, SP","Rio das Ostras, RJ","Itapevi, SP","São Vicente, SP","Bacabal, MA","Itabuna, BA","Resende, RJ","Barueri, SP","Itapecerica da Serra, SP","Santos, SP","Itumbiara, GO","Itacoatiara, AM","Mesquita, RJ","Praia Grande, SP","Alagoinhas, BA","Londrina, PR","Linhares, ES","Vitória da Conquista, BA","Iguatu, CE","Boa Vista, RR","Foz do Iguaçu, PR","Araguari, MG","Patos de Minas, MG","Guarapari, ES","Santa Luzia, MG","Igarassu, PE","Aracaju, SE","Catalão, GO","Sinop, MT","Araraquara, SP","Brasília, DF","Crato, CE","João Pessoa, PB","Feira de Santana, BA","Campo Grande, MS","Araguaína, TO","Natal, RN","Juiz de Fora, MG","Uberlândia, MG","Salvador, BA","Aparecida de Goiânia, GO","Palmas, TO","Barreiras, BA","São Félix do Xingu, PA","São José do Rio Preto, SP","Goiânia, GO","Luziânia, GO","Teresina, PI","Ribeirão Preto, SP","Caxias, MA","Belo Horizonte, MG","Mossoró, RN","Altamira, PA","Castanhal, PA","Bragança, PA","Trindade, GO","Paulínia, SP","Governador Valadares, MG","Rio Verde, GO","Senador Canedo, GO","Cametá, PA","Itaituba, PA","Parauapebas, PA","São José de Ribamar, MA","Caucaia, CE","Macapá, AP","Imperatriz, MA","São Luís, MA","Mogi das Cruzes, SP","Abaetetuba, PA","Belém, PA","Campinas, SP","Diadema, SP","Taubaté, SP","São Paulo, SP","Cuiabá, MT","Rio Branco, AC","Patos, PB","Recife, PE","Sumaré, SP","Parintins, AM","Fortaleza, CE","Ipatinga, MG","Rio de Janeiro, RJ","São João de Meriti, RJ","Marabá, PA","Marituba, PA","Santarém, PA","Santana, AP","Nova Lima, MG","Uberaba, MG","Varginha, MG","Petrópolis, RJ","Ananindeua, PA","Vitória de Santo Antão, PE","Coronel Fabriciano, MG","Vespasiano, MG","Duque de Caxias, RJ","Macaé, RJ","Rio Claro, SP","Tucuruí, PA","Maracanaú, CE","São Gonçalo, RJ","São José dos Campos, SP","Manaus, AM","Itapipoca, CE","Campos dos Goytacazes, RJ","Nilópolis, RJ","Niterói, RJ","Nova Iguaçu, RJ","Manacapuru, AM","Santa Cruz do Sul, RS","Sapucaia do Sul, RS","Bagé, RS","Fazenda Rio Grande, PR","Campo Largo, PR","Erechim, RS","Lages, SC","Piraquara, PR","São Mateus, ES","Serra, ES","Aracruz, ES","São Leopoldo, RS","Tubarão, SC","Vitória, ES","Vila Velha, ES","Colatina, ES","Bento Gonçalves, RS","Alvorada, RS","Pelotas, RS","Cachoeiro de Itapemirim, ES","Gravataí, RS","Cariacica, ES","Breves, PA","Guarapuava, PR","Valença, BA","Nossa Senhora do Socorro, SE","Novo Hamburgo, RS","Cachoeirinha, RS","Santa Maria, RS","Canoas, RS","Florianópolis, SC","Umuarama, PR","Bayeux, PB","Criciúma, SC","Passo Fundo, RS","Joinville, SC","Araucária, PR","Apucarana, PR","Pinhais, PR","Ibirité, MG","Ribeirão Pires, SP","Carapicuíba, SP","Leme, SP","Caxias do Sul, RS","Tatuí, SP","Rio Grande, RS","Poços de Caldas, MG","Barra do Piraí, RJ","Itapetininga, SP","Várzea Paulista, SP","Colombo, PR","Codó, MA","Teixeira de Freitas, BA","Botucatu, SP","Indaiatuba, SP","Itanhaém, SP","Franco da Rocha, SP","Salto, SP","Votorantim, SP","Caieiras, SP","Paranaguá, PR","Cotia, SP","Itajaí, SC","Barbacena, MG","Mairiporã, SP","Uruguaiana, RS","Brusque, SC","Jaraguá do Sul, SC","Blumenau, SC","Palhoça, SC","Balneário Camboriú, SC","Almirante Tamandaré, PR","Sarandi, PR","Guaíba, RS","Suzano, SP","Águas Lindas de Goiás, GO","Poá, SP","Arapongas, PR","Cascavel, PR","Novo Gama, GO","Guaratinguetá, SP","Cambé, PR","Caraguatatuba, SP","Mauá, SP","Birigui, SP","Maranguape, CE","Divinópolis, MG","Viamão, RS","Jaú, SP","Santa Cruz do Capibaribe, PE","Sete Lagoas, MG","Caruaru, PE","Bragança Paulista, SP","Araras, SP","Chapecó, SC","Valinhos, SP","Conselheiro Lafaiete, MG","Queimados, RJ","Ferraz de Vasconcelos, SP","Pouso Alegre, MG","Itaguaí, RJ","São Caetano do Sul, SP","Teresópolis, RJ","Itu, SP","Santana de Parnaíba, SP","Barra Mansa, RJ","Jandira, SP","Taboão da Serra, SP","Nova Friburgo, RJ","Brusque, SC","Santa Cruz do Sul, RS","Sapucaia do Sul, RS","Simões Filho, BA","Jaraguá do Sul, SC","Novo Hamburgo, RS","Cachoeirinha, RS","Santa Maria, RS","Fazenda Rio Grande, PR","Blumenau, SC","Ariquemes, RO","Canoas, RS","Camaçari, BA","Londrina, PR","Lagarto, SE","Nossa Senhora do Socorro, SE","Montes Claros, MG","Bagé, RS","Erechim, RS","Balneário Camboriú, SC","Petrolina, PE","Ponta Grossa, PR","Alagoinhas, BA","Florianópolis, SC","Juazeiro do Norte, CE","São José dos Pinhais, PR","Palhoça, SC","Umuarama, PR","Parnamirim, RN","Campo Largo, PR","Passo Fundo, RS","Paulo Afonso, BA","Criciúma, SC","São José, SC","Linhares, ES","Vitória da Conquista, BA","Iguatu, CE","Lauro de Freitas, BA","Araucária, PR","Joinville, SC","Santo Antônio de Jesus, BA","Boa Vista, RR","Sarandi, PR","Guaíba, RS","Pinhais, PR","Lages, SC","Porto Alegre, RS","Arapongas, PR","Bayeux, PB","Araguari, MG","Itatiba, SP","Apucarana, PR","São Leopoldo, RS","Patos de Minas, MG","Francisco Morato, SP","Suzano, SP","Almirante Tamandaré, PR","São Lourenço da Mata, PE","Jequié, BA","Foz do Iguaçu, PR","Três Lagoas, MS","Santa Luzia, MG","Franca, SP","Maringá, PR","Piraquara, PR","Caxias do Sul, RS","São Gonçalo do Amarante, RN","Guarapari, ES","Araçatuba, SP","Cascavel, PR","Toledo, PR","Corumbá, MS","Águas Lindas de Goiás, GO","Valparaíso de Goiás, GO","Poá, SP","Eunápolis, BA","Nova Serrana, MG","Igarassu, PE","Tubarão, SC","Catalão, GO","João Pessoa, PB","Ribeirão Pires, SP","Bento Gonçalves, RS","São Mateus, ES","Novo Gama, GO","Cambé, PR","Aracaju, SE","Brasília, DF","Araguaína, TO","Crato, CE","Feira de Santana, BA","Araraquara, SP","Bauru, SP","São Carlos, SP","Tatuí, SP","Rio Grande, RS","Campo Grande, MS","Sinop, MT","Serra, ES","Guaratinguetá, SP","Tangará da Serra, MT","Paço do Lumiar, MA","Birigui, SP","Carapicuíba, SP","Mauá, SP","Natal, RN","Santa Rita, PB","Paulista, PE","Uberlândia, MG","Rio Branco, AC","Juiz de Fora, MG","Aracruz, ES","Vila Velha, ES","Caraguatatuba, SP","Dourados, MS","Formosa, GO","Cabo de Santo Agostinho, PE","Ibirité, MG","Santa Bárbara d'Oeste, SP","Pelotas, RS","Aparecida de Goiânia, GO","Vilhena, RO","Itabira, MG","Piracicaba, SP","Presidente Prudente, SP","Colombo, PR","Curitiba, PR","Gravataí, RS","Trindade, GO","Salvador, BA","Poços de Caldas, MG","Catanduva, SP","Anápolis, GO","Goiânia, GO","Codó, MA","Barreiras, BA","Contagem, MG","Muriaé, MG","Vitória, ES","Barra do Piraí, RJ","Jaú, SP","Leme, SP","Senador Canedo, GO","São Félix do Xingu, PA","Palmas, TO","Betim, MG","Divinópolis, MG","Sertãozinho, SP","Belo Horizonte, MG","Colatina, ES","Volta Redonda, RJ","São José do Rio Preto, SP","Ituiutaba, MG","Barretos, SP","Alvorada, RS","Porto Velho, RO","Teresina, PI","Arapiraca, AL","Passos, MG","Americana, SP","Jundiaí, SP","Rondonópolis, MT","Paragominas, PA","Maranguape, CE","Juazeiro, BA","Sete Lagoas, MG","Itapetininga, SP","Várzea Paulista, SP","Assis, SP","Viamão, RS","Várzea Grande, MT","Luziânia, GO","Mossoró, RN","Campina Grande, PB","Santa Cruz do Capibaribe, PE","São Pedro da Aldeia, RJ","Jataí, GO","Caxias, MA","Jaboatão dos Guararapes, PE","Cachoeiro de Itapemirim, ES","Bragança Paulista, SP","Ribeirão Preto, SP","São Luís, MA","Atibaia, SP","Pindamonhangaba, SP","Altamira, PA","Garanhuns, PE","Araxá, MG","Ji-Paraná, RO","Castanhal, PA","São José de Ribamar, MA","Maceió, AL","Teixeira de Freitas, BA","Araras, SP","Paulínia, SP","Guarapuava, PR","Bragança, PA","Imperatriz, MA","Caucaia, CE","Ubá, MG","Campinas, SP","Timon, MA","Caruaru, PE","Conselheiro Lafaiete, MG","Governador Valadares, MG","Japeri, RJ","Franco da Rocha, SP","Hortolândia, SP","Itaquaquecetuba, SP","Mogi Guaçu, SP","Santo André, SP","Valinhos, SP","Chapecó, SC","Rio Verde, GO","Itaituba, PA","Parauapebas, PA","Macapá, AP","Olinda, PE","Itabaiana, SE","Porto Seguro, BA","Cariacica, ES","Botucatu, SP","Indaiatuba, SP","Ourinhos, SP","Belém, PA","Breves, PA","Tailândia, PA","Parnaíba, PI","Barbacena, MG","Ribeirão das Neves, MG","Magé, RJ","Itanhaém, SP","Mogi das Cruzes, SP","São Paulo, SP","Paranaguá, PR","Cametá, PA","Valença, BA","Teófilo Otoni, MG","Diadema, SP","Salto, SP","São Bernardo do Campo, SP","Sumaré, SP","Taubaté, SP","Votorantim, SP","Cuiabá, MT","Abaetetuba, PA","Açailândia, MA","Fortaleza, CE","Abreu e Lima, PE","Camaragibe, PE","Recife, PE","Ilhéus, BA","Coronel Fabriciano, MG","Ipatinga, MG","Nova Lima, MG","Belford Roxo, RJ","Itaguaí, RJ","Queimados, RJ","Caieiras, SP","Embu, SP","Ferraz de Vasconcelos, SP","Guarujá, SP","Guarulhos, SP","Jacareí, SP","Barcarena, PA","Pouso Alegre, MG","Sabará, MG","Varginha, MG","Araruama, RJ","Itaboraí, RJ","Marília, SP","São Caetano do Sul, SP","Sobral, CE","Patos, PB","Uberaba, MG","Vespasiano, MG","Rio de Janeiro, RJ","São João de Meriti, RJ","Teresópolis, RJ","Cotia, SP","Cubatão, SP","Limeira, SP","Osasco, SP","São José dos Campos, SP","Sorocaba, SP","Manaus, AM","Parintins, AM","Marabá, PA","Santarém, PA","Vitória de Santo Antão, PE","Lavras, MG","Angra dos Reis, RJ","Cabo Frio, RJ","Duque de Caxias, RJ","Itaperuna, RJ","Maricá, RJ","Petrópolis, RJ","Itu, SP","Mairiporã, SP","Rio Claro, SP","Santana de Parnaíba, SP","Santos, SP","São Vicente, SP","Itajaí, SC","Itacoatiara, AM","Ananindeua, PA","Marituba, PA","Santana, AP","Itabuna, BA","Macaé, RJ","Niterói, RJ","Resende, RJ","Rio das Ostras, RJ","São Gonçalo, RJ","Barueri, SP","Itapecerica da Serra, SP","Itapevi, SP","Praia Grande, SP","Taboão da Serra, SP","Tucuruí, PA","Maracanaú, CE","Barra Mansa, RJ","Jandira, SP","Itumbiara, GO","Manacapuru, AM","Bacabal, MA","Itapipoca, CE","Campos dos Goytacazes, RJ","Mesquita, RJ","Nilópolis, RJ","Nova Friburgo, RJ","Nova Iguaçu, RJ","Uruguaiana, RS"],[1.03,0.78,0.78,0.75,0.73,0.71,0.7,0.6899999999999999,0.68,0.66,0.61,0.59,0.58,0.54,0.52,0.49,0.48,0.48,0.47,0.46,0.44,0.44,0.43,0.43,0.43,0.43,0.42,0.4,0.4,0.32,0.32,0.29,0.29,0.28,0.28,0.28,0.28,0.27,0.27,0.26,0.26,0.26,0.26,0.26,0.26,0.26,0.26,0.24,0.24,0.22,0.21,0.21,0.2,0.2,0.2,0.19,0.19,0.19,0.18,0.18,0.17,0.17,0.17,0.17,0.17,0.16,0.15,0.15,0.15,0.14,0.13,0.12,0.12,0.11,0.11,0.11,0.11,0.11,0.11,0.1,0.1,0.1,0.1,0.09,0.09,0.09,0.09,0.09,0.08,0.08,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.06,0.06,0.06,0.06,0.06,0.05,0.05,0.05,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.03,0.03,0.03,0.02,0.02,0.02,0.02,0.02,0.02,0.02,0.01,0.01,0.01,0.76,0.75,0.62,0.61,0.57,0.55,0.49,0.47,0.47,0.42,0.4,0.37,0.37,0.35,0.34,0.33,0.33,0.32,0.32,0.32,0.3,0.28,0.27,0.26,0.25,0.23,0.23,0.22,0.22,0.21,0.2,0.19,0.18,0.17,0.17,0.16,0.16,0.15,0.14,0.14,0.13,0.13,0.12,0.11,0.11,0.11,0.1,0.1,0.1,0.1,0.1,0.09,0.09,0.09,0.09,0.08,0.08,0.08,0.08,0.08,0.07000000000000001,0.07000000000000001,0.06,0.06,0.06,0.06,0.05,0.05,0.05,0.05,0.05,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.02,0.02,0.02,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0,1.04,0.97,0.86,0.67,0.58,0.55,0.43,0.42,0.4,0.35,0.34,0.34,0.33,0.3,0.29,0.25,0.24,0.19,0.19,0.17,0.17,0.14,0.13,0.12,0.09,0.9,0.89,0.86,0.86,0.85,0.72,0.66,0.58,0.57,0.5600000000000001,0.54,0.52,0.47,0.47,0.44,0.41,0.39,0.39,0.38,0.36,0.33,0.32,0.31,0.29,0.28,0.28,0.25,0.25,0.14,0.14,0.13,0.1,0.1,0.1,0.09,0.09,0.07000000000000001,0.06,0.03,0.01,0,1.36,1.07,0.86,0.8100000000000001,0.73,0.62,0.62,0.57,0.46,0.45,0.43,0.42,0.4,0.39,0.38,0.29,0.28,0.26,0.24,0.21,0.21,0.21,0.2,0.19,0.19,0.17,0.17,0.16,0.14,0.13,0.11,0.08,0.08,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.06,0.06,0.05,0.03,0.02,0.02,0.01,1.21,1.03,0.99,0.97,0.89,0.88,0.84,0.84,0.79,0.79,0.77,0.76,0.75,0.72,0.71,0.71,0.71,0.71,0.71,0.6899999999999999,0.68,0.66,0.65,0.65,0.64,0.63,0.63,0.62,0.6,0.59,0.59,0.58,0.58,0.58,0.57,0.5600000000000001,0.55,0.55,0.55,0.55,0.54,0.52,0.52,0.52,0.51,0.51,0.5,0.49,0.48,0.48,0.48,0.48,0.48,0.47,0.47,0.47,0.47,0.46,0.46,0.45,0.45,0.43,0.43,0.43,0.43,0.43,0.42,0.42,0.42,0.42,0.42,0.42,0.42,0.42,0.41,0.4,0.4,0.39,0.39,0.38,0.37,0.37,0.37,0.36,0.36,0.35,0.34,0.34,0.33,0.33,0.33,0.33,0.33,0.33,0.33,0.33,0.33,0.33,0.32,0.32,0.31,0.3,0.3,0.3,0.3,0.29,0.29,0.29,0.29,0.28,0.28,0.28,0.28,0.28,0.28,0.28,0.27,0.27,0.27,0.27,0.27,0.26,0.26,0.26,0.26,0.26,0.26,0.26,0.26,0.25,0.25,0.25,0.25,0.25,0.24,0.24,0.24,0.24,0.24,0.24,0.24,0.24,0.24,0.23,0.23,0.23,0.23,0.23,0.22,0.22,0.22,0.22,0.21,0.21,0.21,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.19,0.19,0.19,0.19,0.19,0.19,0.18,0.18,0.18,0.18,0.17,0.17,0.17,0.17,0.17,0.16,0.16,0.16,0.16,0.16,0.15,0.15,0.15,0.14,0.14,0.14,0.13,0.13,0.13,0.13,0.13,0.13,0.13,0.13,0.12,0.12,0.12,0.12,0.12,0.11,0.11,0.11,0.11,0.11,0.11,0.11,0.11,0.11,0.11,0.11,0.11,0.11,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.09,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.08,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.07000000000000001,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.06,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.04,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.03,0.02,0.02,0.02,0.02,0.02,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0.01,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>.model_id<\/th>\n      <th>.model_desc<\/th>\n      <th>name_muni<\/th>\n      <th>rmse<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":4},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>models_accuracy <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mun_names, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"mun"</span> <span class="ot">=</span> <span class="st">"code_muni"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(.model_id, .model_desc, name_muni, rmse) <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rmse =</span> <span class="fu">round</span>(rmse, <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(.model_desc) <span class="sc">%&gt;%</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">.model_id =</span> <span class="fu">case_when</span>(</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    .model_id <span class="sc">!=</span> <span class="st">"global"</span> <span class="sc">~</span> <span class="st">"cluster"</span>,</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.default =</span> .model_id</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> .model_id, <span class="at">values_from =</span> rmse) <span class="sc">%&gt;%</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dif =</span> <span class="fu">round</span>(global <span class="sc">-</span> cluster, <span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">filter =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-7d5e9ae9f281eb146f47" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7d5e9ae9f281eb146f47">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"1.21\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"1.36\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"-0.19\" data-max=\"0.22\" data-scale=\"2\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333"],["RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER","RANGER"],["Ariquemes, RO","Ji-Paraná, RO","Porto Velho, RO","Vilhena, RO","Rio Branco, AC","Itacoatiara, AM","Manacapuru, AM","Manaus, AM","Parintins, AM","Boa Vista, RR","Abaetetuba, PA","Altamira, PA","Ananindeua, PA","Barcarena, PA","Belém, PA","Bragança, PA","Breves, PA","Cametá, PA","Castanhal, PA","Itaituba, PA","Marabá, PA","Marituba, PA","Paragominas, PA","Parauapebas, PA","Santarém, PA","São Félix do Xingu, PA","Tailândia, PA","Tucuruí, PA","Macapá, AP","Santana, AP","Araguaína, TO","Palmas, TO","Açailândia, MA","Bacabal, MA","Caxias, MA","Codó, MA","Imperatriz, MA","Paço do Lumiar, MA","São José de Ribamar, MA","São Luís, MA","Timon, MA","Parnaíba, PI","Teresina, PI","Caucaia, CE","Crato, CE","Fortaleza, CE","Iguatu, CE","Itapipoca, CE","Juazeiro do Norte, CE","Maracanaú, CE","Maranguape, CE","Sobral, CE","Parnamirim, RN","Mossoró, RN","Natal, RN","São Gonçalo do Amarante, RN","Bayeux, PB","Campina Grande, PB","João Pessoa, PB","Patos, PB","Santa Rita, PB","Abreu e Lima, PE","Cabo de Santo Agostinho, PE","Camaragibe, PE","Caruaru, PE","Garanhuns, PE","Igarassu, PE","Jaboatão dos Guararapes, PE","Olinda, PE","Paulista, PE","Petrolina, PE","Recife, PE","Santa Cruz do Capibaribe, PE","São Lourenço da Mata, PE","Vitória de Santo Antão, PE","Arapiraca, AL","Maceió, AL","Aracaju, SE","Itabaiana, SE","Lagarto, SE","Nossa Senhora do Socorro, SE","Alagoinhas, BA","Barreiras, BA","Camaçari, BA","Eunápolis, BA","Feira de Santana, BA","Ilhéus, BA","Itabuna, BA","Jequié, BA","Juazeiro, BA","Lauro de Freitas, BA","Paulo Afonso, BA","Porto Seguro, BA","Salvador, BA","Santo Antônio de Jesus, BA","Simões Filho, BA","Teixeira de Freitas, BA","Valença, BA","Vitória da Conquista, BA","Araguari, MG","Araxá, MG","Barbacena, MG","Belo Horizonte, MG","Betim, MG","Conselheiro Lafaiete, MG","Contagem, MG","Coronel Fabriciano, MG","Divinópolis, MG","Governador Valadares, MG","Ibirité, MG","Ipatinga, MG","Itabira, MG","Ituiutaba, MG","Juiz de Fora, MG","Lavras, MG","Montes Claros, MG","Muriaé, MG","Nova Lima, MG","Nova Serrana, MG","Passos, MG","Patos de Minas, MG","Poços de Caldas, MG","Pouso Alegre, MG","Ribeirão das Neves, MG","Sabará, MG","Santa Luzia, MG","Sete Lagoas, MG","Teófilo Otoni, MG","Ubá, MG","Uberaba, MG","Uberlândia, MG","Varginha, MG","Vespasiano, MG","Aracruz, ES","Cachoeiro de Itapemirim, ES","Cariacica, ES","Colatina, ES","Guarapari, ES","Linhares, ES","São Mateus, ES","Serra, ES","Vila Velha, ES","Vitória, ES","Angra dos Reis, RJ","Araruama, RJ","Barra do Piraí, RJ","Barra Mansa, RJ","Belford Roxo, RJ","Cabo Frio, RJ","Campos dos Goytacazes, RJ","Duque de Caxias, RJ","Itaboraí, RJ","Itaguaí, RJ","Itaperuna, RJ","Japeri, RJ","Macaé, RJ","Magé, RJ","Maricá, RJ","Mesquita, RJ","Nilópolis, RJ","Niterói, RJ","Nova Friburgo, RJ","Nova Iguaçu, RJ","Petrópolis, RJ","Queimados, RJ","Resende, RJ","Rio das Ostras, RJ","Rio de Janeiro, RJ","São Gonçalo, RJ","São João de Meriti, RJ","São Pedro da Aldeia, RJ","Teresópolis, RJ","Volta Redonda, RJ","Americana, SP","Araçatuba, SP","Araraquara, SP","Araras, SP","Assis, SP","Atibaia, SP","Barretos, SP","Barueri, SP","Bauru, SP","Birigui, SP","Botucatu, SP","Bragança Paulista, SP","Caieiras, SP","Campinas, SP","Caraguatatuba, SP","Carapicuíba, SP","Catanduva, SP","Cotia, SP","Cubatão, SP","Diadema, SP","Embu, SP","Ferraz de Vasconcelos, SP","Franca, SP","Francisco Morato, SP","Franco da Rocha, SP","Guaratinguetá, SP","Guarujá, SP","Guarulhos, SP","Hortolândia, SP","Indaiatuba, SP","Itanhaém, SP","Itapecerica da Serra, SP","Itapetininga, SP","Itapevi, SP","Itaquaquecetuba, SP","Itatiba, SP","Itu, SP","Jacareí, SP","Jandira, SP","Jaú, SP","Jundiaí, SP","Leme, SP","Limeira, SP","Mairiporã, SP","Marília, SP","Mauá, SP","Mogi das Cruzes, SP","Mogi Guaçu, SP","Osasco, SP","Ourinhos, SP","Paulínia, SP","Pindamonhangaba, SP","Piracicaba, SP","Poá, SP","Praia Grande, SP","Presidente Prudente, SP","Ribeirão Pires, SP","Ribeirão Preto, SP","Rio Claro, SP","Salto, SP","Santa Bárbara d'Oeste, SP","Santana de Parnaíba, SP","Santo André, SP","Santos, SP","São Bernardo do Campo, SP","São Caetano do Sul, SP","São Carlos, SP","São José do Rio Preto, SP","São José dos Campos, SP","São Paulo, SP","São Vicente, SP","Sertãozinho, SP","Sorocaba, SP","Sumaré, SP","Suzano, SP","Taboão da Serra, SP","Tatuí, SP","Taubaté, SP","Valinhos, SP","Várzea Paulista, SP","Votorantim, SP","Almirante Tamandaré, PR","Apucarana, PR","Arapongas, PR","Araucária, PR","Cambé, PR","Campo Largo, PR","Cascavel, PR","Colombo, PR","Curitiba, PR","Fazenda Rio Grande, PR","Foz do Iguaçu, PR","Guarapuava, PR","Londrina, PR","Maringá, PR","Paranaguá, PR","Pinhais, PR","Piraquara, PR","Ponta Grossa, PR","São José dos Pinhais, PR","Sarandi, PR","Toledo, PR","Umuarama, PR","Balneário Camboriú, SC","Blumenau, SC","Brusque, SC","Chapecó, SC","Criciúma, SC","Florianópolis, SC","Itajaí, SC","Jaraguá do Sul, SC","Joinville, SC","Lages, SC","Palhoça, SC","São José, SC","Tubarão, SC","Alvorada, RS","Bagé, RS","Bento Gonçalves, RS","Cachoeirinha, RS","Canoas, RS","Caxias do Sul, RS","Erechim, RS","Gravataí, RS","Guaíba, RS","Novo Hamburgo, RS","Passo Fundo, RS","Pelotas, RS","Porto Alegre, RS","Rio Grande, RS","Santa Cruz do Sul, RS","Santa Maria, RS","São Leopoldo, RS","Sapucaia do Sul, RS","Uruguaiana, RS","Viamão, RS","Campo Grande, MS","Corumbá, MS","Dourados, MS","Três Lagoas, MS","Cuiabá, MT","Rondonópolis, MT","Sinop, MT","Tangará da Serra, MT","Várzea Grande, MT","Águas Lindas de Goiás, GO","Anápolis, GO","Aparecida de Goiânia, GO","Catalão, GO","Formosa, GO","Goiânia, GO","Itumbiara, GO","Jataí, GO","Luziânia, GO","Novo Gama, GO","Rio Verde, GO","Senador Canedo, GO","Trindade, GO","Valparaíso de Goiás, GO","Brasília, DF"],[0.77,0.13,0.2,0.26,0.28,0.03,0.01,0.04,0.04,0.52,0.07000000000000001,0.14,0.03,0.06,0.09,0.12,0.09,0.08,0.13,0.1,0.04,0.03,0.19,0.1,0.04,0.23,0.09,0.02,0.1,0.03,0.33,0.23,0.07000000000000001,0.01,0.16,0.24,0.12,0.3,0.13,0.15,0.11,0.09,0.2,0.12,0.33,0.07000000000000001,0.55,0.01,0.64,0.02,0.19,0.05,0.6,0.17,0.29,0.42,0.48,0.17,0.37,0.05,0.29,0.07000000000000001,0.27,0.07000000000000001,0.11,0.14,0.39,0.16,0.1,0.29,0.68,0.07000000000000001,0.17,0.46,0.04,0.2,0.13,0.34,0.1,0.71,0.71,0.65,0.24,0.75,0.4,0.33,0.07000000000000001,0.03,0.46,0.19,0.55,0.58,0.1,0.25,0.54,0.97,0.13,0.08,0.5600000000000001,0.48,0.14,0.09,0.22,0.23,0.11,0.24,0.07000000000000001,0.23,0.11,0.27,0.07000000000000001,0.26,0.21,0.28,0.04,0.71,0.24,0.07000000000000001,0.4,0.2,0.47,0.25,0.06,0.09,0.06,0.43,0.19,0.08,0.12,0.05,0.29,0.06,0.05,0.28,0.16,0.1,0.22,0.42,0.57,0.36,0.32,0.28,0.24,0.04,0.06,0.24,0.02,0.07000000000000001,0.04,0.01,0.04,0.06,0.07000000000000001,0.04,0.11,0.03,0.09,0.04,0.01,0.01,0.03,0.01,0.01,0.04,0.07000000000000001,0.03,0.03,0.05,0.03,0.05,0.17,0.05,0.22,0.2,0.42,0.33,0.13,0.18,0.15,0.21,0.03,0.33,0.3,0.1,0.16,0.07000000000000001,0.12,0.28,0.3,0.25,0.05,0.05,0.08,0.07000000000000001,0.07000000000000001,0.43,0.47,0.11,0.32,0.07000000000000001,0.07000000000000001,0.11,0.1,0.09,0.03,0.19,0.03,0.11,0.48,0.04,0.07000000000000001,0.02,0.24,0.2,0.24,0.05,0.04,0.06,0.3,0.09,0.11,0.05,0.1,0.13,0.15,0.26,0.41,0.03,0.26,0.37,0.16,0.04,0.08,0.27,0.04,0.11,0.04,0.08,0.06,0.33,0.22,0.05,0.09,0.04,0.23,0.05,0.08,0.47,0.03,0.33,0.08,0.11,0.19,0.08,0.47,0.48,0.49,0.55,0.35,0.59,0.42,0.26,0.26,0.79,0.45,0.13,0.72,0.43,0.09,0.51,0.43,0.66,0.63,0.52,0.42,0.62,0.6899999999999999,0.79,1.21,0.11,0.58,0.65,0.04,0.89,0.55,0.51,0.63,0.58,0.39,0.21,0.71,0.37,0.84,0.76,0.43,0.71,0.26,0.52,0.88,0.59,0.27,0.5,0.33,1.03,0.84,0.48,0.99,0,0.18,0.33,0.42,0.28,0.45,0.08,0.2,0.33,0.31,0.18,0.42,0.25,0.27,0.38,0.28,0.25,0.02,0.17,0.18,0.36,0.11,0.24,0.26,0.42,0.34],[0.78,0.13,0.19,0.28,0.06,0.01,0,0.01,0.05,0.55,0.08,0.14,0.03,0.08,0.08,0.13,0.13,0.1,0.14,0.1,0.04,0.04,0.19,0.1,0.04,0.21,0.09,0.02,0.09,0.04,0.28,0.22,0.09,0.02,0.16,0.25,0.09,0.26,0.1,0.09,0.11,0.09,0.17,0.1,0.32,0.05,0.57,0.01,0.66,0.02,0.21,0.04,0.61,0.15,0.27,0.43,0.58,0.17,0.32,0.06,0.26,0.08,0.26,0.04,0.17,0.15,0.37,0.16,0.1,0.29,0.73,0.06,0.19,0.48,0.03,0.21,0.14,0.37,0.09,0.7,0.9,0.76,0.22,0.78,0.4,0.32,0.07000000000000001,0.02,0.49,0.19,0.58,0.59,0.1,0.23,0.54,1.03,0.25,0.09,0.61,0.47,0.11,0.03,0.16,0.24,0.11,0.27,0.03,0.21,0.11,0.44,0.05,0.26,0.2,0.26,0.04,0.71,0.22,0.04,0.4,0.2,0.47,0.32,0.07000000000000001,0.07000000000000001,0.04,0.4,0.19,0.07000000000000001,0.11,0.04,0.25,0.04,0.03,0.34,0.17,0.14,0.25,0.42,0.62,0.4,0.35,0.29,0.3,0.04,0.05,0.31,0.03,0.06,0.04,0.01,0.03,0.06,0.07000000000000001,0.04,0.12,0.03,0.1,0.04,0.01,0.01,0.01,0.01,0.01,0.04,0.08,0.02,0.03,0.05,0.02,0.05,0.17,0.06,0.18,0.17,0.43,0.33,0.16,0.17,0.15,0.2,0.02,0.26,0.24,0.14,0.17,0.09,0.08,0.28,0.39,0.26,0.07000000000000001,0.05,0.08,0.07000000000000001,0.08,0.46,0.48,0.1,0.38,0.07000000000000001,0.06,0.1,0.14,0.13,0.02,0.29,0.03,0.11,0.47,0.06,0.07000000000000001,0.02,0.2,0.18,0.39,0.07000000000000001,0.01,0.06,0.26,0.09,0.11,0.04,0.09,0.12,0.15,0.26,0.43,0.01,0.28,0.41,0.17,0.03,0.1,0.28,0.05,0.11,0.02,0.06,0.07000000000000001,0.32,0.2,0.02,0.07000000000000001,0.03,0.24,0.05,0.06,0.46,0.02,0.36,0.08,0.13,0.28,0.1,0.62,0.47,0.42,0.52,0.29,0.58,0.4,0.28,0.28,0.67,0.49,0.12,0.75,0.43,0.09,0.47,0.42,0.75,0.6899999999999999,0.62,0.43,0.66,0.73,0.86,1.36,0.14,0.57,0.72,0.06,1.07,0.54,0.43,0.8100000000000001,0.68,0.33,0.19,0.86,0.24,0.86,0.85,0.38,0.55,0.17,0.57,0.89,0.5600000000000001,0.19,0.52,0.33,1.04,0.86,0.34,0.97,0,0.21,0.3,0.42,0.27,0.44,0.07000000000000001,0.21,0.34,0.32,0.12,0.45,0.29,0.23,0.35,0.26,0.19,0.02,0.17,0.18,0.39,0.11,0.11,0.13,0.44,0.33],[-0.01,0,0.01,-0.02,0.22,0.02,0.01,0.03,-0.01,-0.03,-0.01,0,0,-0.02,0.01,-0.01,-0.04,-0.02,-0.01,0,0,-0.01,0,0,0,0.02,0,0,0.01,-0.01,0.05,0.01,-0.02,-0.01,0,-0.01,0.03,0.04,0.03,0.06,0,0,0.03,0.02,0.01,0.02,-0.02,0,-0.02,0,-0.02,0.01,-0.01,0.02,0.02,-0.01,-0.1,0,0.05,-0.01,0.03,-0.01,0.01,0.03,-0.06,-0.01,0.02,0,0,0,-0.05,0.01,-0.02,-0.02,0.01,-0.01,-0.01,-0.03,0.01,0.01,-0.19,-0.11,0.02,-0.03,0,0.01,0,0.01,-0.03,0,-0.03,-0.01,0,0.02,0,-0.06,-0.12,-0.01,-0.05,0.01,0.03,0.06,0.06,-0.01,0,-0.03,0.04,0.02,0,-0.17,0.02,0,0.01,0.02,0,0,0.02,0.03,0,0,0,-0.07000000000000001,-0.01,0.02,0.02,0.03,0,0.01,0.01,0.01,0.04,0.02,0.02,-0.06,-0.01,-0.04,-0.03,0,-0.05,-0.04,-0.03,-0.01,-0.06,0,0.01,-0.07000000000000001,-0.01,0.01,0,0,0.01,0,0,0,-0.01,0,-0.01,0,0,0,0.02,0,0,0,-0.01,0.01,0,0,0.01,0,0,-0.01,0.04,0.03,-0.01,0,-0.03,0.01,0,0.01,0.01,0.07000000000000001,0.06,-0.04,-0.01,-0.02,0.04,0,-0.09,-0.01,-0.02,0,0,0,-0.01,-0.03,-0.01,0.01,-0.06,0,0.01,0.01,-0.04,-0.04,0.01,-0.1,0,0,0.01,-0.02,0,0,0.04,0.02,-0.15,-0.02,0.03,0,0.04,0,0,0.01,0.01,0.01,0,0,-0.02,0.02,-0.02,-0.04,-0.01,0.01,-0.02,-0.01,-0.01,0,0.02,0.02,-0.01,0.01,0.02,0.03,0.02,0.01,-0.01,0,0.02,0.01,0.01,-0.03,0,-0.02,-0.09,-0.02,-0.15,0.01,0.07000000000000001,0.03,0.06,0.01,0.02,-0.02,-0.02,0.12,-0.04,0.01,-0.03,0,0,0.04,0.01,-0.09,-0.06,-0.1,-0.01,-0.04,-0.04,-0.07000000000000001,-0.15,-0.03,0.01,-0.07000000000000001,-0.02,-0.18,0.01,0.08,-0.18,-0.1,0.06,0.02,-0.15,0.13,-0.02,-0.09,0.05,0.16,0.09,-0.05,-0.01,0.03,0.08,-0.02,0,-0.01,-0.02,0.14,0.02,0,-0.03,0.03,0,0.01,0.01,0.01,-0.01,-0.01,-0.01,0.06,-0.03,-0.04,0.04,0.03,0.02,0.06,0,0,0,-0.03,0,0.13,0.13,-0.02,0.01]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>.model_desc<\/th>\n      <th>name_muni<\/th>\n      <th>global<\/th>\n      <th>cluster<\/th>\n      <th>dif<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>models_accuracy <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(mun_names, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"mun"</span> <span class="ot">=</span> <span class="st">"code_muni"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(.model_id, .model_desc, name_muni, rmse) <span class="sc">%&gt;%</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(.model_desc) <span class="sc">%&gt;%</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">.model_id =</span> <span class="fu">case_when</span>(</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    .model_id <span class="sc">!=</span> <span class="st">"global"</span> <span class="sc">~</span> <span class="st">"cluster"</span>,</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.default =</span> .model_id</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> .model_id, <span class="at">values_from =</span> rmse) <span class="sc">%&gt;%</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dif =</span> <span class="fu">round</span>(global <span class="sc">-</span> cluster, <span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(.model_desc, dif) <span class="sc">%&gt;%</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> global, <span class="at">y =</span> cluster, <span class="at">fill =</span> .model_desc, <span class="at">color =</span> dif)) <span class="sc">+</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> .<span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>  viridis<span class="sc">::</span><span class="fu">scale_color_viridis</span>(<span class="at">option =</span> <span class="st">"inferno"</span>) <span class="sc">+</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Global model"</span>, <span class="at">y =</span> <span class="st">"Subset models"</span>, <span class="at">title =</span> <span class="st">"RMSE error obtained with global and subset training strategies"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="dengue_mts_climate_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="session-info" class="level2">
<h2 class="anchored" data-anchor-id="session-info">Session info</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.3.2 (2023-10-31)
Platform: x86_64-conda-linux-gnu (64-bit)
Running under: CentOS Linux 7 (Core)

Matrix products: default
BLAS/LAPACK: /home/raphaelfs/miniconda3/envs/quarto/lib/libopenblasp-r0.3.25.so;  LAPACK version 3.11.0

Random number generation:
 RNG:     L'Ecuyer-CMRG 
 Normal:  Inversion 
 Sample:  Rejection 
 
locale:
 [1] LC_CTYPE=pt_BR.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=pt_BR.UTF-8        LC_COLLATE=pt_BR.UTF-8    
 [5] LC_MONETARY=pt_BR.UTF-8    LC_MESSAGES=pt_BR.UTF-8   
 [7] LC_PAPER=pt_BR.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=pt_BR.UTF-8 LC_IDENTIFICATION=C       

time zone: America/Sao_Paulo
tzcode source: system (glibc)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] rlang_1.1.1        ranger_0.16.0      sf_1.0-14          DT_0.28           
 [5] geobr_1.8.1        tictoc_1.2         kableExtra_1.3.4   dtwclust_5.5.12   
 [9] dtw_1.23-1         proxy_0.4-27       timetk_2.8.2       modeltime_1.2.5   
[13] finetune_1.1.0     bonsai_0.2.1       yardstick_1.2.0    workflowsets_1.0.0
[17] workflows_1.1.3    tune_1.1.2         rsample_1.2.0      recipes_1.0.6     
[21] parsnip_1.1.0      modeldata_1.1.0    infer_1.0.4        dials_1.2.0       
[25] scales_1.2.1       broom_1.0.4        tidymodels_1.0.0   arrow_12.0.0      
[29] lubridate_1.9.2    forcats_1.0.0      stringr_1.5.0      dplyr_1.1.2       
[33] purrr_1.0.1        readr_2.1.4        tidyr_1.3.0        tibble_3.2.1      
[37] ggplot2_3.4.2      tidyverse_2.0.0   

loaded via a namespace (and not attached):
  [1] rstudioapi_0.14     jsonlite_1.8.5      magrittr_2.0.3     
  [4] modeltools_0.2-23   farver_2.1.1        nloptr_2.0.3       
  [7] rmarkdown_2.22      vctrs_0.6.3         minqa_1.2.6        
 [10] webshot_0.5.4       htmltools_0.5.5     curl_5.0.2         
 [13] sass_0.4.6          parallelly_1.36.0   StanHeaders_2.26.26
 [16] bslib_0.4.2         KernSmooth_2.23-21  htmlwidgets_1.6.2  
 [19] plyr_1.8.8          cachem_1.0.8        zoo_1.8-12         
 [22] mime_0.12           lifecycle_1.0.3     iterators_1.0.14   
 [25] pkgconfig_2.0.3     Matrix_1.5-4.1      R6_2.5.1           
 [28] fastmap_1.1.1       future_1.32.0       shiny_1.7.4        
 [31] clue_0.3-64         digest_0.6.31       colorspace_2.1-0   
 [34] furrr_0.3.1         RSpectra_0.16-1     crosstalk_1.2.0    
 [37] labeling_0.4.2      fansi_1.0.4         timechange_0.2.0   
 [40] httr_1.4.6          compiler_4.3.2      doParallel_1.0.17  
 [43] bit64_4.0.5         withr_2.5.0         backports_1.4.1    
 [46] viridis_0.6.3       DBI_1.1.3           MASS_7.3-60        
 [49] lava_1.7.2.1        classInt_0.4-9      units_0.8-2        
 [52] tools_4.3.2         httpuv_1.6.11       flexclust_1.4-1    
 [55] future.apply_1.11.0 nnet_7.3-19         glue_1.6.2         
 [58] nlme_3.1-162        promises_1.2.0.1    grid_4.3.2         
 [61] cluster_2.1.4       reshape2_1.4.4      generics_0.1.3     
 [64] gtable_0.3.3        tzdb_0.4.0          class_7.3-22       
 [67] data.table_1.14.8   hms_1.1.3           xml2_1.3.4         
 [70] utf8_1.2.3          ggrepel_0.9.3       foreach_1.5.2      
 [73] pillar_1.9.0        later_1.3.1         splines_4.3.2      
 [76] lhs_1.1.6           lattice_0.21-8      survival_3.5-5     
 [79] bit_4.0.5           tidyselect_1.2.0    knitr_1.43         
 [82] gridExtra_2.3       svglite_2.1.1       stats4_4.3.2       
 [85] xfun_0.39           hardhat_1.3.0       timeDate_4022.108  
 [88] stringi_1.7.12      boot_1.3-28.1       DiceDesign_1.9     
 [91] yaml_2.3.7          evaluate_0.21       codetools_0.2-19   
 [94] cli_3.6.1           RcppParallel_5.1.7  rpart_4.1.19       
 [97] xtable_1.8-4        systemfonts_1.0.4   jquerylib_0.1.4    
[100] munsell_0.5.0       Rcpp_1.0.10         globals_0.16.2     
[103] parallel_4.3.2      ellipsis_0.3.2      gower_1.0.1        
[106] assertthat_0.2.1    prettyunits_1.1.1   lme4_1.1-35.1      
[109] GPfit_1.0-8         listenv_0.9.0       viridisLite_0.4.2  
[112] ipred_0.9-13        e1071_1.7-13        xts_0.13.1         
[115] prodlim_2019.11.13  rvest_1.0.3         shinyjs_2.1.0      </code></pre>
</div>
</div>
</section>
<section id="useful-links" class="level2">
<h2 class="anchored" data-anchor-id="useful-links">Useful links</h2>
<ul>
<li><p><a href="https://business-science.github.io/modeltime/articles/modeling-panel-data.html" class="uri">https://business-science.github.io/modeltime/articles/modeling-panel-data.html</a></p></li>
<li><p><a href="https://blog.bguarisma.com/series/time-series-forecasting" class="uri">https://blog.bguarisma.com/series/time-series-forecasting</a></p></li>
</ul>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      try { hash = new URL(url).hash; } catch {}
      const id = hash.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note !== null) {
        try {
          const html = processXRef(id, note);
          instance.setContent(html);
        } finally {
          instance.enable();
          instance.show();
        }
      } else {
        // See if we can fetch this
        fetch(url.split('#')[0])
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.getElementById(id);
          if (note !== null) {
            const html = processXRef(id, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../dengue-model/dengue_mts_all.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Multivariate clustering, all data model</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../software.html" class="pagination-link">
        <span class="nav-page-text">Software</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Website made with <a href="https://quarto.org/">Quarto</a>, by Raphael Saldanha.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Inria | LNCC | PCDaS</p>
</div>
  </div>
</footer>




</body></html>